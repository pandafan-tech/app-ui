(window.webpackJsonp=window.webpackJsonp||[]).push([[4,19,29,30],{1168:function(_,d,s){var n=s(1214);n.__esModule&&(n=n.default),typeof n=="string"&&(n=[[_.i,n,""]]),n.locals&&(_.exports=n.locals);var i=s(2).default,y=i("ccd943a2",n,!0,{sourceMap:!1})},1169:function(_,d,s){var n=s(1216);n.__esModule&&(n=n.default),typeof n=="string"&&(n=[[_.i,n,""]]),n.locals&&(_.exports=n.locals);var i=s(2).default,y=i("7bb8e643",n,!0,{sourceMap:!1})},1170:function(_,d,s){var n=s(1218);n.__esModule&&(n=n.default),typeof n=="string"&&(n=[[_.i,n,""]]),n.locals&&(_.exports=n.locals);var i=s(2).default,y=i("f6804874",n,!0,{sourceMap:!1})},1184:function(_,d,s){"use strict";s.d(d,"a",function(){return O});var n=s(144);function i(h){if(Array.isArray(h))return Object(n.a)(h)}var y=s(209),T=s(109);function b(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O(h){return i(h)||Object(y.a)(h)||Object(T.a)(h)||b()}},1213:function(_,d,s){"use strict";var n=s(1168),i=s.n(n)},1214:function(_,d,s){var n=s(1),i=n(!1);i.push([_.i,".server-mode-selector-container{position:fixed;bottom:2rem;padding:.5rem;width:100%;background:#34495e}.server-mode-selector-container label{font-weight:500}.server-mode-selector-container .el-form-item__label{color:#f4f7fc}.server-mode-selector-container .el-select input{background:#2c3e50;border:1px solid #f4f7fc;color:#f4f7fc;border-radius:0}.server-mode-selector-container .el-select .el-input .el-input__inner{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}.server-mode-selector-container .el-select .el-input.is-disabled .el-input__inner{background:transparent;color:#f4f7fc}.server-mode-selector-container .el-select .el-input.is-disabled .el-input__suffix{display:none}",""]),_.exports=i},1215:function(_,d,s){"use strict";var n=s(1169),i=s.n(n)},1216:function(_,d,s){var n=s(1),i=n(!1);i.push([_.i,".left-space[data-v-54224be0]{margin-left:1rem}",""]),_.exports=i},1217:function(_,d,s){"use strict";var n=s(1170),i=s.n(n)},1218:function(_,d,s){var n=s(1),i=n(!1);i.push([_.i,".left-space[data-v-5610ec63]{margin-left:1rem}",""]),_.exports=i},1245:function(_,d,s){"use strict";s.r(d);var n=function(){var a=this,l=a.$createElement,u=a._self._c||l;return u("div",{staticClass:"server-mode-selector-container"},[a.show_smart_route?u("div",[u("el-form",{ref:"form",staticClass:"full-width no-margin",attrs:{"label-width":"60%",size:"small","label-position":"left"}},[u("el-form-item",{staticClass:"no-margin",attrs:{label:a.$t("settings_page.work_mode.title")}},[u("el-select",{staticClass:"full-width no-margin",attrs:{placeholder:"\u9009\u62E9\u4EE3\u7406\u6A21\u5F0F"},model:{value:a.smart_route,callback:function(j){a.smart_route=j},expression:"smart_route"}},[u("el-option",{attrs:{label:a.$tc("settings_page.work_mode.options",1),value:!0}}),u("el-option",{attrs:{label:a.$tc("settings_page.work_mode.options",2),value:!1}})],1)],1)],1)],1):a._e(),a.show_access_mode?u("div",[u("el-form",{ref:"form",staticClass:"full-width no-margin",attrs:{"label-width":"60%",size:"small","label-position":"left"}},[u("el-form-item",{staticClass:"no-margin",attrs:{label:a.server_mode_label}},[u("el-select",{staticClass:"full-width no-margin",attrs:{placeholder:"\u9009\u62E9\u63A5\u5165\u6A21\u5F0F",disabled:a.runTimeState.connect_state.status=="connected"},model:{value:a.servermode,callback:function(j){a.servermode=j},expression:"servermode"}},[u("el-option",{attrs:{label:a.$t("auto"),value:"auto"}}),u("el-option",{attrs:{label:"SSLTide",value:"ssltide",disabled:!a.runTimeState.selected_line.ssltide}}),u("el-option",{attrs:{label:"Trojan",value:"trojan",disabled:!a.runTimeState.selected_line.trojan||!a.coreSupportTrojan}}),u("el-option",{attrs:{label:"V2Ray(VMESS)",value:"v2",disabled:!a.runTimeState.selected_line.v2}})],1)],1)],1)],1):a._e()])},i=[],y=s(32),T={data:function(){return{}},computed:{show_access_mode:function(){return this.runTimeState.show_access_mode},show_smart_route:function(){return this.runTimeState.show_smart_route},server_mode_label:function(){return this.$t("settings_page.connect_protocol.title")},server_mode_str:function(){return{ssltide:"SSLTide",ss:"Shadowsocks(R)",v2:"V2Ray",trojan:"Trojan",auto:"\u81EA\u52A8"}[this.$store.state.runTimeState.server_mode]},coreSupportTrojan:function(){var l=this.versionNewerThan("1.8.3");return l>0},smart_route_str:function(){return""},servermode:{get:function(){return console.log("servermode------>",this.runTimeState.servermode),this.runTimeState.servermode},set:function(l){this.$store.commit("runTimeState",{servermode:l})}},smart_route:{get:function(){return console.log("smart_route------>",this.runTimeState.smart_route),this.runTimeState.smart_route},set:function(l){y.ipcRenderer.send("update-smart-route",l),this.$store.commit("runTimeState",{smart_route:l})}},workmode:{get:function(){return console.log("workmode------>",this.runTimeState.workmode),this.runTimeState.workmode},set:function(l){this.$store.commit("runTimeState",{workmode:l})}}},methods:{}},b=T,O=s(1213),h=s(51),x=Object(h.a)(b,n,i,!1,null,null,null),L=d.default=x.exports},1262:function(_,d,s){var n=s(1336);n.__esModule&&(n=n.default),typeof n=="string"&&(n=[[_.i,n,""]]),n.locals&&(_.exports=n.locals);var i=s(2).default,y=i("1d92baf5",n,!0,{sourceMap:!1})},1299:function(_,d,s){"use strict";s.r(d);var n=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"server-list-container"},[t("div",{staticClass:"kept-space"}),t("div",{staticClass:"server-list",style:e.listStyle},[e._l(e.sortedLinesWithAuto,function(o,m){return t("el-card",{key:o.name,staticClass:"line-container",class:{selected:e.runTimeState.selected_line.name==o.name,connected:e.runTimeState.connect_state.status=="connected"&&e.runTimeState.connect_state.line.name==o.name},attrs:{"body-style":e.card_style},nativeOn:{click:function(v){return e.changeSelectedLine(o)}}},[t("el-row",{staticClass:"line-content"},[t("h1",{staticClass:"title smooth"},[!e.runTimeState.no_flag&&!o.is_auto?t("flag",{attrs:{iso:e.getFlagISO(o),squared:!1}}):e._e(),t("ServerName",{attrs:{server:o}}),o.ratio>1?t("a",{staticClass:"label"},[t("el-popover",{attrs:{placement:"top-start",width:"200",trigger:"hover",content:"\u5C06\u4EE5\u5B9E\u9645\u4F7F\u7528\u91CF x"+o.ratio+" \u8BA1\u5165\u8D26\u53F7"}},[t("span",{attrs:{slot:"reference"},slot:"reference"},[e._v("x"+e._s(o.ratio))])])],1):e._e(),t("span",{directives:[{name:"show",rawName:"v-show",value:e.runTimeState.connect_state.status=="connected"&&e.runTimeState.connect_state.line.name==o.name,expression:"runTimeState.connect_state.status == 'connected' && runTimeState.connect_state.line.name == line.name"}],staticClass:"right"},[t("i",{staticClass:"right el-icon-success"})]),e.getLatencyResult(o)?t("span",{staticClass:"right label round success super-badge test-result"},[e.getLatencyResult(o)<5001?t("span",[e._v(e._s(e.getLatencyResult(o))),t("span",{staticClass:"small"},[e._v("ms")])]):e._e(),e.getLatencyResult(o)>5e3?t("span",[t("span",{staticClass:"small"},[e._v(e._s(e.$t("timeout")))])]):e._e()]):e._e(),o.perm&&e.runTimeState.current_service_cate=="allplatform"&&o.perm.indexOf(2)==-1?t("span",{staticClass:"right label round super-badge"},[e._v(e._s(e.$t("pro_only")))]):e._e(),o.premium?t("span",{staticClass:"right label round super-badge premium-badge"},[t("el-popover",{attrs:{placement:"top-start",width:"200",trigger:"hover",content:e.$tc("buy_premium_data.premium_cost_hint",e.pre_left_str)},nativeOn:{click:function(v){return e.goBuyPremiumData.apply(null,arguments)}}},[t("span",{attrs:{slot:"reference"},slot:"reference"},[e.pre_left_str=="\u221E"?t("span",[e._v(e._s(e.pre_left_str)+e._s(e.$t("premium")))]):e._e(),e.pre_left>0?t("span",[e._v(e._s(e.$t("premium"))+" "+e._s(e.pre_left_str))]):e._e(),e.pre_left<=0?t("span",[e._v(e._s(e.$t("buy_premium_data.badge_hint")))]):e._e()])])],1):e._e()],1),t("h5",{staticClass:"description"},[t("ServerDescription",{attrs:{server:o}})],1)])],1)}),t("el-card",{staticClass:"utils"},[t("el-button",{attrs:{type:"primary"},on:{click:e.performLatencyTest}},[e._v(e._s(e.$t("speed_test.btn")))]),t("br"),t("br"),t("p",{staticClass:"small"},[e._v(e._s(e.$t("speed_test.desc")))])],1)],2),t("div",[t("ModeSelection")],1)])},i=[],y=s(49),T=s(48),b=s(47),O=s(23),h=s(24),x=s(41),L=s(63),a=s(40),l=s(26),u=s(22),j=s(9),K=s(39),k=s(76),R=s(6),J=s(65),X=s(206),G=s(142),V=s(64),H=s(77),Q=s(27),C=s(1184),E=s(18),D=s(52),p=s(32),M=s(53),I=s(1245);function N(e,r){var t=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=z(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var o=0,m=function(){};return{s:m,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:m}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var v=!0,g=!1,c;return{s:function(){t=t.call(e)},n:function(){var S=t.next();return v=S.done,S},e:function(S){g=!0,c=S},f:function(){try{!v&&t.return!=null&&t.return()}finally{if(g)throw c}}}}function z(e,r){if(!!e){if(typeof e=="string")return P(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return P(e,r)}}function P(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}function w(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),t.push.apply(t,o)}return t}function $(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?w(Object(t),!0).forEach(function(o){Object(E.a)(e,o,t[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))})}return e}var B=M.require("nodejs-tcp-ping"),W={components:{ModeSelection:I.default},data:function(){return{card_style:{"padding-top":0},selected_line:{},actualServerUsedByClash:null}},computed:$({sortedLines:function(){var r=this,t=["gb","au","ca"],o=["tw1","tw2","tw3","tw4","hk2","la3","la2","la1"],m=Object(C.a)(this.current_lines).sort(function(v,g){var c;if((c=v.pac_name||v.name)!==null&&c!==void 0&&c.includes("dedi"))return-1;if(r.getLatencyResult(v)&&r.getLatencyResult(g))return r.getLatencyResult(v)-r.getLatencyResult(g);if(!v.name||!g.name)return 0;var f=v.name.split(" ")[0].toLowerCase(),S=g.name.split(" ")[0].toLowerCase();return t.includes(f)?1:o.includes(f)||f<S?-1:S<f?1:0});return m},sortedLinesWithAuto:function(){return this.coreIsClash?[this.auto_server].concat(Object(C.a)(this.sortedLines)):this.sortedLines},show_access_mode:function(){return this.runTimeState.show_access_mode},show_smart_route:function(){return this.runTimeState.show_smart_route},listStyle:function(){var r=3.2;return console.log(this.show_access_mode),console.log(this.show_smart_route),this.show_access_mode&&(r+=2.8),this.show_smart_route&&(r+=2.8),console.log(r),{bottom:r+"rem"}},pre_left:function(){return this.current_service.pre_quota>=1e3?"\u221E":(Number(this.current_service.pre_quota)-Number(this.current_service.pre_used)).toFixed(1)},pre_left_str:function(){return isNaN(Number(this.pre_left))?this.pre_left:"".concat(this.pre_left,"GB")},pre_used_str:function(){return this.current_service.pre_used.toFixed(1)+"GB"},auto_server:function(){return{is_auto:!0,name:this.$t("auto_server.name"),description:this.$t("auto_server.description")}},workmode:{get:function(){return console.log("workmode------>",this.runTimeState.workmode),this.runTimeState.workmode},set:function(r){this.$store.commit("runTimeState",{workmode:r})}}},Object(D.b)(["speedTestResults"])),created:function(){var r=this;p.ipcRenderer.removeAllListeners("run-time-state-change"),p.ipcRenderer.removeAllListeners("selected_line-change"),p.ipcRenderer.on("selected_line-change",function(t,o){r.changeSelectedLine(o)}),p.ipcRenderer.removeAllListeners("tcp-ping-reply"),p.ipcRenderer.on("tcp-ping-reply",function(t,o){r.speedTestReply(o)}),this.coreIsClash&&(p.ipcRenderer.removeAllListeners("clash-speed-test-reply"),p.ipcRenderer.on("clash-speed-test-reply",function(t,o){r.clashSpeedTestReply(o)}),p.ipcRenderer.removeAllListeners("clash-auto-server-change"),p.ipcRenderer.on("clash-auto-server-change",function(t,o){console.log("clash auto server changed:",o),r.$notify({title:r.$t("new_server_selected")+o,type:"success",offset:20,duration:2500})}))},mounted:function(){var r=this;(!this.runTimeState.selected_line||!this.runTimeState.selected_line.name)&&(console.log("set default line.",this.sortedLines[0]),this.sortedLines[0]&&(this.changeSelectedLine(this.sortedLines[0]),this.sortedLines[0]||setTimeout(function(){r.changeSelectedLine(r.sortedLines[0])},1e3)))},methods:{getFlagISO:function(r){if(!r.name)return"";var t=r.name.split(" ")[0].replace(/\d/g,"").toLowerCase(),o={la:"us",ft:"us",sjc:"us"};return o[t]||t},getLatencyResult:function(r){return this.speedTestResults?this.speedTestResults[r.name]||this.speedTestResults[r.server]:(console.log("no speed result."),null)},changeSelectedLine:function(r){var t=this;if(!!r){if(console.log("ssl port:",r.ssltide_port),this.connected&&!this.coreIsClash)return console.log("Connected and not using Clash, ignoring.");if(r.premium&&this.pre_left<=0)return this.$confirm(this.$t("buy_premium_data.line_change_warning")).then(function(m){t.$router.push({path:"/dashboard/buy-premium-data/"})}).catch(function(m){});if(this.$store.dispatch("runTimeState",{selected_line:r}),this.workmode=r.is_auto?"auto":"manual",this.connected&&this.coreIsClash)if(this.runTimeState.connect_state.line.name===r.name)console.log("same server, click ignored.");else{r.is_auto?p.ipcRenderer.send("clash",{action:"switchToAutoServer"}):p.ipcRenderer.send("clash",{action:"setProxy",arg:r.name});var o={line:JSON.parse(JSON.stringify(r)),servermode:this.runTimeState.servermode,status:"connected"};this.$store.dispatch("runTimeState",{connect_state:o}),p.ipcRenderer.send("user-info-update",4)}!r.is_auto&&this.runTimeState.servermode!=="auto"&&!r[this.runTimeState.servermode]&&(console.log("changing servermode..."),this.$store.dispatch("runTimeState",{servermode:"auto"}))}},performLatencyTest:function(){return this.coreIsClash?this.connected?this.clashSpeedTest():this.tcpSpeedTest():this.tcpSpeedTest()},tcpSpeedTest:function(){this.$message(this.$t("speed_test.notify"));var r=N(this.sortedLines),t;try{for(r.s();!(t=r.n()).done;){var o=t.value;this.tcpPingOneServer(o)}}catch(m){r.e(m)}finally{r.f()}},tcpPingOneServer:function(r){var t=this;return Object(R.a)(regeneratorRuntime.mark(function o(){var m,v,g;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return m=443,t.runTimeState.current_service_cate==="home"&&(m=8443),v=r.ssltide_port||m,f.next=5,t.tcpPing({name:r.name,server:r.server,port:v,opt:{}});case 5:g=f.sent,t.speedTestReply(g);case 7:case"end":return f.stop()}},o)}))()},tcpPing:function(r){return Object(R.a)(regeneratorRuntime.mark(function t(){var o,m,v;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.t0=$,c.next=4,B.tcpPing({attempts:(r==null||(o=r.opt)===null||o===void 0?void 0:o.attempts)||3,host:r.server,port:r.port,timeout:(r==null||(m=r.opt)===null||m===void 0?void 0:m.timeout)||5e3});case 4:return c.t1=c.sent,c.t2={result:c.t1},c.t3=r,v=(0,c.t0)(c.t2,c.t3),c.abrupt("return",v);case 11:c.prev=11,c.t4=c.catch(0),console.log(c.t4);case 14:case"end":return c.stop()}},t,null,[[0,11]])}))()},clashSpeedTest:function(){var r=this;this.$message(this.$t("speed_test.notify")),this.sortedLines.forEach(function(t){p.ipcRenderer.send("clash-speed-test",{arg:{serverName:t.name,url:r.runTimeState.checkwebsite||"http://www.gstatic.com/generate_204",timeout:5e3}})})},speedTestReply:function(r){console.log(r),this.$store.dispatch("speedTestResult",r)},clashSpeedTestReply:function(r){this.$store.dispatch("clashSpeedTestResult",r)},goBuyPremiumData:function(){var r=this;console.log("yay");var t="/buy-service/?cate=allplatform&time=0";if(this.pre_left<=0)return this.$router.push({path:t});this.$confirm(this.$t("buy_premium_data.redirect_confirm")).then(function(o){r.$router.push({path:t})}).catch(function(o){})}}},U=W,Y=s(1335),F=s(51),A=Object(F.a)(U,n,i,!1,null,null,null),Z=d.default=A.exports;installComponents(A,{ServerName:s(1300).default,ServerDescription:s(1301).default,ModeSelection:s(1245).default})},1300:function(_,d,s){"use strict";s.r(d);var n=function(){var l=this,u=l.$createElement,j=l._self._c||u;return j("span",[l._v(l._s(l.name))])},i=[],y=s(142),T=s(27),b={name:"ServerName",props:{server:{type:Object,default:function(){}}},computed:{name:function(){return this.$i18n.locale==="zh"?this.server.name:this.server.name.split(" ")[0]}}},O=b,h=s(1215),x=s(51),L=Object(x.a)(O,n,i,!1,null,"54224be0",null),a=d.default=L.exports},1301:function(_,d,s){"use strict";s.r(d);var n=function(){var l=this,u=l.$createElement,j=l._self._c||u;return j("span",[l._v(l._s(l.description))])},i=[],y=s(27),T=s(107),b={name:"ServerDescription",props:{server:{type:Object,default:function(){}}},computed:{description:function(){return this.$i18n.locale==="zh"||this.server.name.startsWith("AUTO")?this.server.description:this.server.name.startsWith("CN")?"Specially optimized for access from China.":""}}},O=b,h=s(1217),x=s(51),L=Object(x.a)(O,n,i,!1,null,"5610ec63",null),a=d.default=L.exports},1335:function(_,d,s){"use strict";var n=s(1262),i=s.n(n)},1336:function(_,d,s){var n=s(1),i=n(!1);i.push([_.i,".server-list-container{position:fixed;bottom:6.2rem;height:100vh}.server-list-container .utils{background:#2c3e50;text-align:center;border:none;border-radius:0}.server-list-container .utils *{color:#f9f9f9}.server-list-container .utils a{color:#1abc9c!important}.server-list-container .utils .el-button{background:transparent}.server-list-container .kept-space{position:fixed;top:0;left:0;height:1.5rem}.server-list-container .server-list{top:1.5rem;overflow-x:overlay;overflow-y:overlay;position:fixed}.server-list-container .server-list .el-card:hover{box-shadow:0 2px 12px 0 rgba(0,0,0,.2)}.server-list-container .server-list:hover::-webkit-scrollbar{width:2px;background-color:#2c3e50}.server-list-container .server-list::-webkit-scrollbar{width:0}.server-list-container .server-list::-webkit-scrollbar-track,.server-list-container .server-list::-webkit-scrollbar-track-piece{display:none}.server-list-container .server-list::-webkit-scrollbar-thumb{background:grey}.server-list-container .server-list .line-container{cursor:default;margin-bottom:1px;position:relative;border:none;border-radius:0!important;width:100vw;background:#2c3e50}.server-list-container .server-list .line-container .line-content{border:none;width:100%;padding-top:1rem}.server-list-container .server-list .line-container .line-content .super-badge{margin:0 .1rem 0 .5rem;color:#f9f9f9!important;background:#8e44ad}.server-list-container .server-list .line-container .line-content .super-badge.premium-badge{cursor:pointer}.server-list-container .server-list .line-container .line-content .super-badge.premium-badge .test-result{margin:0 1rem;background:#7f8c8d!important}.server-list-container .server-list .line-container .line-content .line-number{display:none;font-size:1rem;color:#95a5a6}.server-list-container .server-list .line-container .line-content .label{margin-left:1rem;font-size:.8rem}.server-list-container .server-list .line-container .line-content .title{font-size:1.3rem;font-weight:500;color:#bdc3c7}.server-list-container .server-list .line-container .line-content .title .flag-icon{margin-right:1rem}.server-list-container .server-list .line-container .line-content .description{margin-top:.5rem;font-weight:500;font-size:.8rem;color:#95a5a6}.server-list-container .server-list .line-container.connected{background:#16a085}.server-list-container .server-list .line-container.connected *{color:#fff!important}.server-list-container .server-list .line-container.selected{position:-webkit-sticky;position:sticky;top:0;bottom:0;z-index:999999;box-shadow:0 0 12px 5px rgba(0,0,0,.3)}.server-list-container .server-list .line-container.selected:not(.connected){background:#16a085}.server-list-container .server-list .line-container.selected:not(.connected) *{color:#fff}.server-list-container .server-list .line-container:hover .line-number{display:inline}.server-list-container .server-list .line-container:hover .line-number .title{padding-left:.5rem}.server-list-container .server-list .line-container:hover:not(.connected):not(.selected){background:#34495e}.server-list-container .server-list .line-container:hover:not(.connected):not(.selected) *{color:#bdc3c7}",""]),_.exports=i}}]);
