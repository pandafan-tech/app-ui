(window.webpackJsonp=window.webpackJsonp||[]).push([[46,8],{1129:function(s,c,i){var l=i(1135);l.__esModule&&(l=l.default),typeof l=="string"&&(l=[[s.i,l,""]]),l.locals&&(s.exports=l.locals);var d=i(2).default,b=d("78a5912f",l,!0,{sourceMap:!1})},1130:function(s,c,i){"use strict";i.r(c);var l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.updating,expression:"updating"}],staticClass:"updatebilling-container"},[n("el-row",{attrs:{gutter:10}},[e.showHead?n("el-col",{attrs:{span:24}},[n("center",[n("h5",[n("i",{staticClass:"el-icon-question"}),n("span",[e._v(e._s(e.$t("update_billing.sub.a")))])])])],1):e._e(),n("el-form",{attrs:{"label-position":"right","label-width":"80px",model:e.newbilling},nativeOn:{submit:function(a){return a.preventDefault(),e.onSubmit.apply(null,arguments)}}},[n("el-col",{attrs:{span:12}},[n("p",[e._v(e._s(e.$t("update_billing.form.firstname"))+e._s(e.personalNameRequired))]),n("el-input",{attrs:{type:"text",placeholder:e.$t("update_billing.form.firstname")},model:{value:e.newbilling.firstname,callback:function(a){e.$set(e.newbilling,"firstname",a)},expression:"newbilling.firstname"}})],1),n("el-col",{attrs:{span:12}},[n("p",[e._v(e._s(e.$t("update_billing.form.lastname"))+e._s(e.personalNameRequired))]),n("el-input",{attrs:{type:"text",placeholder:e.$t("update_billing.form.lastname")},model:{value:e.newbilling.lastname,callback:function(a){e.$set(e.newbilling,"lastname",a)},expression:"newbilling.lastname"}})],1),n("el-col",{attrs:{span:24}},[n("p",[e._v(e._s(e.$t("update_billing.form.addr")))]),n("el-input",{attrs:{type:"text",placeholder:e.$t("update_billing.form.addr")},model:{value:e.newbilling.addr,callback:function(a){e.$set(e.newbilling,"addr",a)},expression:"newbilling.addr"}})],1),n("el-col",{attrs:{span:12}},[n("p",[e._v(e._s(e.$t("update_billing.form.city")))]),n("el-input",{attrs:{type:"text",placeholder:e.$t("update_billing.form.city")},model:{value:e.newbilling.city,callback:function(a){e.$set(e.newbilling,"city",a)},expression:"newbilling.city"}})],1),n("el-col",{attrs:{span:12}},[n("p",[e._v(e._s(e.$t("update_billing.form.state")))]),n("el-input",{attrs:{type:"text",placeholder:e.$t("update_billing.form.state")},model:{value:e.newbilling.state,callback:function(a){e.$set(e.newbilling,"state",a)},expression:"newbilling.state"}})],1),n("el-col",{attrs:{span:12}},[n("p",[e._v(e._s(e.$t("update_billing.form.zip")))]),n("el-input",{attrs:{type:"text",placeholder:e.$t("update_billing.form.zip")},model:{value:e.newbilling.zip,callback:function(a){e.$set(e.newbilling,"zip",a)},expression:"newbilling.zip"}})],1),n("el-col",{attrs:{span:12}},[n("p",[e._v(e._s(e.$t("update_billing.form.country")))]),n("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:e.$t("update_billing.form.country")},model:{value:e.newbilling.country,callback:function(a){e.$set(e.newbilling,"country",a)},expression:"newbilling.country"}},e._l(e.countryList,function(a){return n("el-option",{key:a,attrs:{label:a,value:a}})}),1)],1),e.newbilling.company_name||e.inputCompanyInfo?n("div",[n("el-col",{attrs:{span:24}},[n("p",[e._v(e._s(e.$t("update_billing.form.company_name"))+"*")]),n("el-input",{attrs:{type:"text",placeholder:e.$t("update_billing.form.company_name")},model:{value:e.newbilling.company_name,callback:function(a){e.$set(e.newbilling,"company_name",a)},expression:"newbilling.company_name"}})],1),n("el-col",{attrs:{span:24}},[n("p",[e._v(e._s(e.$t("update_billing.form.company_vat")))]),n("el-input",{attrs:{type:"text",placeholder:e.$t("update_billing.form.company_vat")},model:{value:e.newbilling.company_vat,callback:function(a){e.$set(e.newbilling,"company_vat",a)},expression:"newbilling.company_vat"}})],1)],1):e._e()],1)],1),e.vatRate?n("div",[n("h4",{staticClass:"warning"},[e._v(e._s(e.$t("billing.eu_hint")))])]):e._e(),n("el-button",{staticClass:"full-width save-button",attrs:{type:"success",size:"small"},on:{click:function(a){return e.updateBilling()}}},[e._v(e._s(e.$t("update_billing.save")))]),n("br"),n("el-row",{attrs:{justify:"space-between",align:"middle"}},[n("el-col",{attrs:{span:12,align:"start"}},[e.inputCompanyInfo||e.newbilling.company_name?e._e():n("el-link",{staticClass:"success",attrs:{plain:"",type:"success"},on:{click:function(a){e.inputCompanyInfo=!0}}},[e._v(e._s(e.$t("billing.input_company_info")))])],1),e.showDelete?n("el-col",{attrs:{span:12,align:"end"}},[n("el-link",{staticClass:"warning",attrs:{type:"warning"},on:{click:function(a){return e.delBilling()}}},[e._v(e._s(e.$t("update_billing.del")))])],1):e._e()],1),n("el-row",{staticClass:"explain"},[n("h5",[e._v("- "+e._s(e.$t("update_billing.sub.a")))]),n("h5",[e._v("- "+e._s(e.$t("update_billing.sub.b")))]),n("h5",[e._v("- "+e._s(e.$t("update_billing.sub.d")))]),n("br"),n("h5",[e._v(e._s(e.$t("update_billing.sub.e")))])])],1)},d=[],b=i(62),O=i(40),S=i(27),P=i(39),x=i(74),v=i(6),B=i(14),r=i(23),p=i(9),_=i(206),h=i(18),N=i(63),z=i(75),R=i(207),k=i(1133);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?C(Object(n),!0).forEach(function(a){Object(h.a)(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}var L={middleware:["load-rt-data","authenticated"],props:{showHead:{type:Boolean,default:!0},showDelete:{type:Boolean,default:!0},saved:{type:Function,default:null}},data:function(){return{newbilling:{firstname:"",lastname:"",addr:"",city:"",state:"",zip:"",country:"China",company_name:"",company_vat:""},euList:R,countryList:k,updating:!1,inputCompanyInfo:!1}},computed:{personalNameRequired:function(){return this.inputCompanyInfo?"":"*"},vatReverseCharge:function(){return!!(this.newbilling.company_vat&&this.newbilling.country!=="Netherlands")},vatRate:function(){var t=0;return this.euList.includes(this.newbilling.country)&&(t=.21,this.vatReverseCharge&&(t=0)),t}},mounted:function(){var t;if(document.addEventListener("keydown",this.escHandler,!1),(t=this.$store.state.user.billing)!==null&&t!==void 0&&t.country){console.log("Init billing address as user's billing.",this.user.billing);for(var n=M({},this.$store.state.user.billing),a=0,u=Object.entries(n);a<u.length;a++){var g=Object(B.a)(u[a],2),m=g[0],f=g[1];n[m]=unescape(f.trim())}this.newbilling=n,this.newbilling.country||(console.log("setting default country to China"),this.newbilling.country="China")}},beforeDestroy:function(){document.removeEventListener("keydown",this.escHandler)},methods:{updateBilling:function(){var t=this;return Object(v.a)(regeneratorRuntime.mark(function n(){var a,u,g,m,f,I,y,w,$,j;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:a=["firstname","lastname","country","addr","city"],u=0,g=a;case 2:if(!(u<g.length)){o.next=11;break}if(m=g[u],!(!t.newbilling[m]||!t.newbilling[m].trim())){o.next=8;break}if(!((f=t.newbilling.company_name)!==null&&f!==void 0&&f.trim()&&["firstname","lastname"].includes(m))){o.next=7;break}return o.abrupt("continue",8);case 7:return o.abrupt("return",t.$message({message:t.$t("update_billing.incomplete"),type:"warning"}));case 8:u++,o.next=2;break;case 11:if(t.countryList.includes(t.newbilling.country)){o.next=13;break}return o.abrupt("return",t.$message({message:"\u65E0\u6CD5\u8BC6\u522B\u7684\u56FD\u5BB6\u540D\u79F0\uFF0C\u8BF7\u91CD\u65B0\u9009\u62E9\u3002",type:"warning"}));case 13:return o.prev=13,t.updating=!0,o.next=17,t.$store.dispatch("updateBilling",M({},t.newbilling));case 17:I=o.sent,console.log("ret:",I),t.$notify({title:t.$t("update_billing.saved"),type:"success"}),t.updating=!1,t.saved&&t.saved(),o.next=29;break;case 24:o.prev=24,o.t0=o.catch(13),console.log("failed:",(y=o.t0.response)===null||y===void 0||(w=y.data)===null||w===void 0?void 0:w.message),t.$notify({title:t.$t("update_billing.save_failed"),message:t.$t("billing.".concat(($=o.t0.response)===null||$===void 0||(j=$.data)===null||j===void 0?void 0:j.message)),type:"error"}),t.updating=!1;case 29:case"end":return o.stop()}},n,null,[[13,24]])}))()},delBilling:function(){var t=this;this.$confirm(this.$t("warning.confirm_delete"),this.$t("warning.title"),{confirmButtonText:this.$t("confirm"),cancelButtonText:this.$t("service_selector.cancel"),type:"warning"}).then(function(){t.updating=!0,t.$store.dispatch("updateBilling",{}).then(function(){t.$notify({title:t.$t("update_billing.deleted"),type:"success"}),t.newbilling={}}).catch(function(n){var a,u;t.$notify({title:t.$t("update_billing.delete_error"),message:t.$t("billing.".concat((a=n.response)===null||a===void 0||(u=a.data)===null||u===void 0?void 0:u.message)),type:"error"})}).finally(function(){t.updating=!1})}).catch(function(){})}}},E=L,A=i(1134),D=i(51),T=Object(D.a)(E,l,d,!1,null,null,null),G=c.default=T.exports},1133:function(s){s.exports=JSON.parse(`["Argentina","Armenia","Aruba","Australia","Austria","Azerbaijan","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bermuda","Bhutan","Bolivia","Bonaire, Sint Eustatius and Saba","Bosnia and Herzegovina","Bouvet Island","Brazil","British Indian Ocean Territory","Brunei Darussalam","Bulgaria","Burkina Faso","Cameroon","Canada","Cape Verde","Cayman Islands","Chad","Chile","China","Christmas Island","Cocos (Keeling) Islands","Colombia","Comoros","Cook Islands","Costa Rica","C\xF4te d'Ivoire, Republic of","Croatia","Cura\xE7ao","Cyprus","Czech Republic","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Estonia","Ethiopia","Falkland Islands (Islas Malvinas)","Faroe Islands","Fiji","Finland","France","French Guiana","French Polynesia","French Southern and Antarctic Lands","Gabon","Gambia, The","Georgia","Germany","Gibraltar","Greece","Greenland","Grenada","Guadeloupe","Guam","Guatemala","Guernsey","Guyana","Haiti","Heard Island and McDonald Islands","Holy See (Vatican City)","Honduras","Hong Kong","Hungary","Iceland","India","Indonesia","Ireland","Isle of Man","Israel","Italy","Jamaica","Japan","Jersey","Jordan","Kazakhstan","Kenya","Kiribati","Korea, Republic of","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Lesotho","Liberia","Liechtenstein","Lithuania","Luxembourg","Macao","Macedonia, Republic of","Madagascar","Malawi","Malaysia","Maldives","Malta","Martinique","Mauritania","Mauritius","Mayotte","Mexico","Micronesia, Federated States of","Moldova","Monaco","Montenegro","Montserrat","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","New Caledonia","New Zealand","Nicaragua","Niger","Niue","Norfolk Island","Northern Mariana Islands","Norway","Oman","Palau","Papua New Guinea","Paraguay","Peru","Pitcairn","Poland","Portugal","Puerto Rico","Qatar","R\xE9union","Romania","Russian Federation","Rwanda","Saint Barth\xE9lemy","Saint Helena, Ascension and Tristan da Cunha","Saint Kitts and Nevis","Saint Lucia","Saint Martin","Saint Pierre and Miquelon","Saint Vincent and the Grenadines","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","South Africa","South Georgia and South Sandwich Islands","Spain","Sri Lanka","Suriname","Swaziland","Sweden","Switzerland","Taiwan","Tajikistan","Tanzania, United Republic of","Thailand","Timor-Leste","Togo","Tokelau","Tonga","Turkmenistan","Turks and Caicos Islands","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","United States Minor Outlying Islands","Uruguay","Uzbekistan","Vanuatu","Vietnam","Virgin Islands, British","Virgin Islands, U.S.","Wallis and Futuna","Western Sahara","Zambia"]`)},1134:function(s,c,i){"use strict";var l=i(1129),d=i.n(l)},1135:function(s,c,i){var l=i(1),d=l(!1);d.push([s.i,".updatebilling-container{position:relative}.updatebilling-container p{margin-top:.5rem!important;font-weight:700!important}.updatebilling-container .el-input{padding-left:0!important;width:100%!important;margin-top:.1rem!important}.updatebilling-container .el-input input{text-align:left!important;border:1px solid #95a5a6;padding:.2rem!important;color:#4d4d4d;font-size:1rem!important}.updatebilling-container .el-input input:focus,.updatebilling-container .el-input input:hover{border-color:#1abc9c}.updatebilling-container .el-card{margin-bottom:.6rem;background:#34495e;border:none}.updatebilling-container .el-card .subtitle{color:#f4f7fc;font-weight:500}.updatebilling-container .el-card.set-item .el-icon-arrow-down{transform:rotate(0deg);transition:transform .15s linear}.updatebilling-container .el-card.set-item .el-icon-arrow-down.open{transform:rotate(-180deg);transition:transform .15s linear}.updatebilling-container .el-card.set-item a i{padding-top:.3rem}.updatebilling-container .el-card.set-item a h2{color:#bdc3c7;margin-bottom:.1rem}.updatebilling-container .el-card.set-item .el-radio:not(.is-checked) .el-radio__label{color:#bdc3c7}.updatebilling-container .el-card__body{padding:1rem}.updatebilling-container .save-button{margin-bottom:1rem;margin-top:1rem;padding:1rem .5rem;font-size:1.1rem}.updatebilling-container .dashboard-link{position:fixed;right:.5rem;bottom:.5rem}.updatebilling-container .explain{margin-top:1rem}.updatebilling-container .el-link--success .el-link--inner{color:var(--logo-green)!important}.updatebilling-container .el-link--warning .el-link--inner{color:var(--warning-yellow)!important}",""]),s.exports=d},1287:function(s,c,i){var l=i(1450);l.__esModule&&(l=l.default),typeof l=="string"&&(l=[[s.i,l,""]]),l.locals&&(s.exports=l.locals);var d=i(2).default,b=d("b1473374",l,!0,{sourceMap:!1})},1449:function(s,c,i){"use strict";var l=i(1287),d=i.n(l)},1450:function(s,c,i){var l=i(1),d=l(!1);d.push([s.i,".updatebilling-container{padding:1rem .5rem .5rem;position:relative}.updatebilling-container h1,.updatebilling-container h2,.updatebilling-container h3,.updatebilling-container h4,.updatebilling-container h5,.updatebilling-container p{color:#bdc3c7}.updatebilling-container .el-col{margin-top:10px}.updatebilling-container .el-card{margin-bottom:.6rem;margin-top:.6rem;background:#34495e;border:none}.updatebilling-container .el-card .subtitle{color:#f4f7fc;font-weight:500}.updatebilling-container .el-card.set-item .el-icon-arrow-down{transform:rotate(0deg);transition:transform .15s linear}.updatebilling-container .el-card.set-item .el-icon-arrow-down.open{transform:rotate(-180deg);transition:transform .15s linear}.updatebilling-container .el-card.set-item a i{padding-top:.3rem}.updatebilling-container .el-card.set-item a h2{color:#bdc3c7;margin-bottom:.1rem}.updatebilling-container .el-card.set-item .el-radio:not(.is-checked) .el-radio__label{color:#bdc3c7}.updatebilling-container .el-card__body{padding:1rem}.updatebilling-container .back-button{margin-bottom:1rem;margin-top:1rem}.updatebilling-container .dashboard-link{position:fixed;right:.5rem;bottom:.5rem}",""]),s.exports=d},1483:function(s,c,i){"use strict";i.r(c);var l=function(){var r=this,p=r.$createElement,_=r._self._c||p;return _("div",{staticClass:"updatebilling-container"},[_("Billing",{attrs:{showHead:!1,showDelete:!1}}),_("br"),_("h5",[r._v("- "+r._s(r.$t("update_billing.sub.a")))]),_("h5",[r._v("- "+r._s(r.$t("update_billing.sub.b")))]),_("h5",[r._v("- "+r._s(r.$t("update_billing.sub.d")))]),_("br"),_("h5",[r._v(r._s(r.$t("update_billing.sub.e")))]),_("br"),_("el-link",{attrs:{type:"warning"},on:{click:function(h){return r.delBilling()}}},[r._v(r._s(r.$t("update_billing.del")))]),_("a",{staticClass:"dashboard-link smooth",on:{click:function(h){return r.$router.go(-1)}}},[r._v(r._s(r.$t("back")))])],1)},d=[],b=i(1130),O={components:{Billing:b.default},middleware:["load-rt-data","authenticated"],data:function(){return{newbilling:{}}},mounted:function(){document.addEventListener("keydown",this.escHandler,!1),this.newbilling=JSON.parse(JSON.stringify(this.$store.state.user.billing))},beforeDestroy:function(){document.removeEventListener("keydown",this.escHandler)},methods:{delBilling:function(){var p=this;this.$confirm(this.$t("warning.confirm_delete"),this.$t("warning.title"),{confirmButtonText:this.$t("confirm"),cancelButtonText:this.$t("service_selector.cancel"),type:"warning"}).then(function(){p.newbilling={},p.$store.dispatch("updateBilling",{}).then(function(){p.$notify({title:p.$t("update_billing.deleted"),type:"success"}),window.location.reload()}).catch(function(_){p.$notify({title:p.$t("update_billing.delete_error"),message:_,type:"error"})})}).catch(function(){})}}},S=O,P=i(1449),x=i(51),v=Object(x.a)(S,l,d,!1,null,null,null),B=c.default=v.exports;installComponents(v,{Billing:i(1130).default})}}]);
