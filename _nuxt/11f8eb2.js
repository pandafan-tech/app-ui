(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1255:function(e,t,n){var i=n(1312);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,n(2).default)("07e6c728",i,!0,{sourceMap:!1})},1310:function(e,t){var n=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,r=/^0o[0-7]+$/i,o=parseInt,s="object"==typeof global&&global&&global.Object===Object&&global,c="object"==typeof self&&self&&self.Object===Object&&self,l=s||c||Function("return this")(),u=Object.prototype.toString,h=Math.max,p=Math.min,d=function(){return l.Date.now()};function m(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function f(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==u.call(e)}(e))return NaN;if(m(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=m(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var s=a.test(e);return s||r.test(e)?o(e.slice(2),s?2:8):i.test(e)?NaN:+e}e.exports=function(e,t,n){var i,a,r,o,s,c,l=0,u=!1,v=!1,y=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function _(t){var n=i,r=a;return i=a=void 0,l=t,o=e.apply(r,n)}function g(e){return l=e,s=setTimeout(b,t),u?_(e):o}function x(e){var n=e-c;return void 0===c||n>=t||n<0||v&&e-l>=r}function b(){var e=d();if(x(e))return F(e);s=setTimeout(b,function(e){var n=t-(e-c);return v?p(n,r-(e-l)):n}(e))}function F(e){return s=void 0,y&&i?_(e):(i=a=void 0,o)}function C(){var e=d(),n=x(e);if(i=arguments,a=this,c=e,n){if(void 0===s)return g(c);if(v)return s=setTimeout(b,t),_(c)}return void 0===s&&(s=setTimeout(b,t)),o}return t=f(t)||0,m(n)&&(u=!!n.leading,r=(v="maxWait"in n)?h(f(n.maxWait)||0,t):r,y="trailing"in n?!!n.trailing:y),C.cancel=function(){void 0!==s&&clearTimeout(s),l=0,i=c=a=s=void 0},C.flush=function(){return void 0===s?o:F(d())},C}},1311:function(e,t,n){"use strict";n(1255)},1312:function(e,t,n){var i=n(1)(!1);i.push([e.i,".summary .details .fee-details-switch[data-v-43d46c16]{text-align:right}.summary .details .otp[data-v-43d46c16]{margin-top:10px;text-align:right;font-size:1rem;color:var(--secondary-color)}.summary .details .promo input[data-v-43d46c16]{font-size:20px;text-align:center;border:none;border-bottom:1px solid var(--secondary-color);border-radius:0;background:transparent;color:var(--primary-color)}@media (max-width:768px){.summary .details .promo input[data-v-43d46c16]{width:120px}}.summary .details .promo .promo-info[data-v-43d46c16]{font-weight:300;background:var(--alizarin);color:var(--white);margin-right:10px;display:inline-block;border-radius:15px;padding:2px 5px;font-size:15px}.summary .details h5.subtitle[data-v-43d46c16]{margin-top:10px}.summary .details h3[data-v-43d46c16]{display:block;position:relative;text-align:right;font-size:1.1rem;line-height:1.1rem;color:var(--primary-color);white-space:pre-wrap;word-wrap:break-word;margin-bottom:10px}.summary .details h3 .subtitle[data-v-43d46c16]{font-weight:300;color:var(--secondary-color);font-size:15px}.summary .details h3.large span[data-v-43d46c16]{font-weight:700!important;color:var(--primary-color)!important}.summary .details h3.large span[data-v-43d46c16]:last-of-type{font-size:30px}.summary .details h3 span[data-v-43d46c16]{display:inline-block}.summary .details h3 span.title[data-v-43d46c16]{color:var(--secondary-color);position:absolute;left:0;font-weight:500;text-align:left}.summary .details h3 span.title i[data-v-43d46c16]{margin-left:5px}",""]),e.exports=i},1466:function(e,t,n){"use strict";n.r(t);n(62),n(39),n(27),n(74);var i=n(6),a=(n(23),n(9),n(40),n(105),n(318),n(28),n(63),n(75),n(18)),r=(n(205),n(1310)),o=n.n(r),s=n(52),c=n(22),l=n.n(c),u=n(209),h=n.n(u),p=n(210),d=n.n(p);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}l.a.extend(h.a),l.a.extend(d.a);var f={name:"PricingPageFeeBreakdown",props:{mode:{type:String,default:"buyService"},selectedCate:{type:String,default:"allplatform"},selectedTime:{type:Number,default:12},selectedPlan:{type:[Number,String],default:4},extraPremium:{type:Number,default:10},allPre:{type:Boolean,default:!1},currentAllPre:{type:Number,default:0},maxPreForCurrentMonth:{type:Number,default:100},showPromo:{type:Boolean,default:!1},promoCode:{type:String,default:""},purchaseType:{type:Object,default:function(){}},selectedPaymentMethod:{type:Object,default:function(){}},topUpAmount:{type:Number,default:20},value:{type:Number,default:0}},data:function(){return{showFeeDetails:!0}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({balance:function(){var e;return null!==(e=this.user)&&void 0!==e&&e.money?"eur"!==this.user.balance_currency?this.user.money/this.$config.rmbToEurRate:this.user.money:0},feeList:function(){return this.$config.feeList},extraPremiumDataMode:function(){return"allplatform"===this.selectedCate&&0===this.selectedTime&&this.extraPremium},currentPlanId:function(){return this.currentService.plan_id},currentService:function(){return this.$store.state.service[this.selectedCate]||{}},dueTimeAfterPurchase:function(){var e=l()().tz("Asia/Shanghai");if(["downgrade","upgrade"].includes(this.purchaseType.type))return e.add(this.currentService.extra.buy_length,"month").format("YYYY/MM/01");var t,n,i=0;"extend"===this.purchaseType.type&&(i=(null===(t=this.currentService)||void 0===t||null===(n=t.extra)||void 0===n?void 0:n.buy_length)||0);return e.add(i+this.selectedTime,"month").format("YYYY/MM/01")},daysInMonth:function(){return this.$utils.getDaysInMonth(l()())},daysLeftThisMonth:function(){return this.daysInMonth-l()().tz("Asia/Shanghai").date()+1},percentageLeftThisMonth:function(){return this.daysLeftThisMonth/this.daysInMonth},selectedPlanFee:function(){return this.$config.feeList[this.selectedPlan]},currentPlanFee:function(){return this.$config.feeList[this.currentPlanId]},currentMonthFeeCalStr:function(){return"".concat(this.$t("pricing.full_month_fee"),": ").concat(this.selectedPlanFee," x ").concat((100*this.percentageLeftThisMonth).toFixed(2),"% (").concat(this.$t("pricing.up_rounded"),")")},currentMonthFeeDisplay:function(){return this.$utils.moneyShape(this.currentMonthFee)+this.$utils.moneyShape(this.otherMonthFee)>this.roundUplocalFee?this.currentMonthFee:this.$utils.moneyShape(this.currentMonthFee)},currentMonthFee:function(){return this.selectedPlanFee*this.percentageLeftThisMonth},otherMonthFee:function(){return["new_buy"].includes(this.purchaseType.type)?(this.realTime-1)*this.selectedPlanFee:0},todayToMonthEndStr:function(){var e=l()().tz("Asia/Shanghai");return"".concat(e.format("M/D"),"-").concat(e.format("M"),"/").concat(this.$utils.getDaysInMonth(e))},realTime:function(){var e=this.selectedTime;return 12===e&&(e=10),6===e&&(e=5.5),e},otherMonthFeeCalStr:function(){return["new_buy"].includes(this.purchaseType.type)?"".concat(this.selectedPlanFee,"(").concat(this.$t("pricing.full_month_fee"),") x ").concat(this.realTime-1,"(").concat(this.$t("pricing.left_month"),")"):""},promoCodeInfoStr:function(){return this.promoCodeInfo?1===this.promoCodeInfo?this.$t("billing.invalid_promo"):"zh"===this.$i18n.locale?"".concat(10*this.promoCodeInfo,"折"):"-".concat(100-100*this.promoCodeInfo,"%"):""},exactLocalFeeBeforeTax:function(){return console.log("mode is:",this.mode),"buyService"===this.mode?this.calcBuyServiceFee():this.calcTopupFee()},exactVatAmount:function(){return this.exactLocalFeeBeforeTax*this.vatRate},vatAmount:function(){return Math.ceil(100*this.exactVatAmount)/100},exactLocalFee:function(){return Math.ceil(100*(this.exactLocalFeeBeforeTax+this.exactVatAmount))/100},forcedMinimalFee:function(){return this.exactLocalFee>0&&this.exactLocalFee<1&&this.amountDue>0},roundUplocalFee:function(){return this.forcedMinimalFee?1:this.exactLocalFee},localFeeDisplay:function(){return console.log("exactLocalFee",this.exactLocalFee),this.$utils.toCurrencyString(this.exactLocalFee,"EUR")},exactAmountDue:function(){return console.log("exactLocalFee:",this.exactLocalFee),console.log("balance:",this.balance),console.log("exact needed:",this.exactLocalFee-this.balance),"topUp"===this.mode?this.exactLocalFee:this.exactLocalFee<=this.balance?0:this.exactLocalFee-this.balance},amountDue:function(){return this.exactAmountDue>0&&this.exactAmountDue<1?1:this.exactAmountDue},amountDueDisplay:function(){return this.$utils.toCurrencyString(this.amountDue,"EUR")},willPayWithRMB:function(){var e,t,n,i;return(null===(e=this.selectedPaymentMethod)||void 0===e||null===(t=e.name)||void 0===t?void 0:t.endsWith("alipay"))||(null===(n=this.selectedPaymentMethod)||void 0===n||null===(i=n.name)||void 0===i?void 0:i.endsWith("wechat"))},isYunshanfu:function(){var e,t;return null===(e=this.selectedPaymentMethod)||void 0===e||null===(t=e.name)||void 0===t?void 0:t.startsWith("paymentwall")},canPayWithRMB:function(){var e,t,n,i;return(null===(e=this.selectedPaymentMethod)||void 0===e||null===(t=e.name)||void 0===t?void 0:t.startsWith("paypal"))||(null===(n=this.selectedPaymentMethod)||void 0===n||null===(i=n.name)||void 0===i?void 0:i.startsWith("paymentwall"))},vatRate:function(){var e,t,n=0;return this.$utils.isEu(null===(e=this.user)||void 0===e||null===(t=e.billing)||void 0===t?void 0:t.country)&&(n=.21,this.vatReverseCharge&&(n=0)),n},vatReverseCharge:function(){var e,t,n,i;return!(null===(e=this.user)||void 0===e||null===(t=e.billing)||void 0===t||!t.company_vat||"Netherlands"===(null===(n=this.user)||void 0===n||null===(i=n.billing)||void 0===i?void 0:i.country))}},Object(s.b)({session:function(e){return e.session},isAdmin:function(e){return e.session.isAdmin},user:function(e){return e.user},loggedIn:function(e){return e.session.jwt_token},serviceArray:function(e){return e.service},hasService:function(e){var t;return(null===(t=Object.keys(e.service))||void 0===t?void 0:t.length)>0}})),watch:{promoCode:function(e){var t=this;return Object(i.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=3;break}return n.next=3,t.checkPromoCode();case 3:t.updateOutsideLocalFee();case 4:case"end":return n.stop()}}),n)})))()},exactLocalFeeBeforeTax:function(){console.log("---\x3e new exactLocalFeeBeforeTax",this.exactLocalFeeBeforeTax),this.$emit("input",this.exactLocalFeeBeforeTax)}},mounted:function(){this.updateOutsideLocalFee()},methods:{updateOutsideLocalFee:function(){console.log("updaing localFee for the outside...",this.exactLocalFeeBeforeTax),this.$emit("input",this.exactLocalFeeBeforeTax)},checkPromoCode:o()(Object(i.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$store.dispatch("pay/checkPromoCode",{promoCode:this.promoCode});case 3:t=e.sent.data,this.promoCodeInfo=t,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.promoCodeInfo=null;case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),500),calcTopupFee:function(){var e=Number(this.topUpAmount);return e<1?1:e},calcBuyServiceFee:function(){if(this.extraPremiumDataMode)return console.log("calcBuyServiceFee->premium"),-1!==this.currentService.quote?this.$utils.moneyShape(this.$config.feeList.pre2*Number(this.extraPremium)):this.allPre?(console.log("calc all pre"),this.$utils.moneyShape((this.maxPreForCurrentMonth+100*(this.currentService.extra.buy_length-this.currentAllPre-1))*this.$config.feeList.pre4)):Number(this.extraPremium)>this.maxPreForCurrentMonth?this.$utils.moneyShape(this.maxPreForCurrentMonth*this.$config.feeList.pre4):this.$utils.moneyShape(Number(this.extraPremium)*this.$config.feeList.pre4);if("downgrade"===this.purchaseType.type)return console.log("calcBuyServiceFee->downgrade"),0;if("upgrade"===this.purchaseType.type){console.log("calcBuyServiceFee->upgrade"),console.log("selectedPlanFee:",this.selectedPlanFee),console.log("currentPlanFee:",this.currentPlanFee);var e=l()(this.currentService.extra.buy_time).tz("Asia/Shanghai"),t=(this.$utils.getDaysInMonth(e)-e.date()+1)/this.$utils.getDaysInMonth(e),n=this.selectedPlanFee-this.currentPlanFee,i=n*t,a=(i+(this.currentService.extra.buy_length-1)*this.currentPlanFee)*(this.promoCodeInfo||1);return console.log(e,t,n,i,a),a}return"extend"===this.purchaseType.type?(console.log("calcBuyServiceFee->extend"),this.selectedPlanFee*this.realTime*(this.promoCodeInfo||1)):(console.log("calcBuyServiceFee->default..."),(this.currentMonthFee+this.otherMonthFee)*(this.promoCodeInfo||1))}}},v=f,y=(n(1311),n(51)),_=Object(y.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",["buyService"===e.mode?n("div",[n("h3",[n("span",{staticClass:"title"},[e._v(e._s(e.$t("service_cate")))]),n("span",[e._v(e._s(e.$t(e.selectedCate)))])]),n("h3",[n("span",{staticClass:"title"},[e._v(e._s(e.$t("service_plan")))]),e.selectedTime?n("span",[e._v(e._s(e.$t("plan_names."+e.selectedPlan)))]):n("span",[e._v(e._s(e.$t("service_details.extra_premium")))])]),"upgrade"===e.purchaseType.type?n("el-tooltip",{attrs:{content:e.$t("pricing.upgrade_all_time"),placement:"top"}},[n("h3",[n("span",{staticClass:"title"},[e._v(e._s(e.$t("pricing.upgrade_time"))),n("i",{staticClass:"el-icon-question"})]),n("span",[e._v(e._s(e.$tc("pricing.month",e.currentService.extra.buy_length)))])])]):e._e(),!["upgrade","downgrade"].includes(e.purchaseType.type)&&e.selectedTime?n("h3",[n("span",{staticClass:"title"},[e._v(e._s(e.$t("pricing.selected_time")))]),n("span",[e._v(e._s(e.$t("buy_length."+e.selectedTime))),1===e.selectedTime&&"new_buy"===e.purchaseType.type?n("span",[e._v("("+e._s(e.todayToMonthEndStr)+")")]):e._e()])]):e._e(),e.selectedTime?n("h3",[n("span",{staticClass:"title"},[e._v(e._s(e.$t("pricing.due_after_payment")))]),n("span",[e._v(e._s(e.dueTimeAfterPurchase))])]):e._e(),e.selectedTime||e.allPre?e._e():n("h3",[n("span",{staticClass:"title"},[e._v(e._s(e.$t("pricing.extra_amount")))]),n("span",[e._v(e._s(e.extraPremium)+" GB")])]),e.selectedTime?e._e():n("h3",[n("span",{staticClass:"title"},[e._v(e._s(e.$t("pricing.extra_amount_price")))]),n("span",[e._v("€"+e._s(e.feeList["pre"+e.currentService.plan_id]))])]),e.showFeeDetails?e._e():n("div",{staticClass:"fee-details-switch"},[n("a",{on:{click:function(t){e.showFeeDetails=!0}}},[e._v(e._s(e.$t("pricing.fee-details")))])]),e.showFeeDetails?n("div",[n("el-divider"),"new_buy"===e.purchaseType.type?n("div",[n("h3",[n("span",{staticClass:"title"},[e._v(e._s(e.$t("pricing.days_left_this_month")))]),n("span",[e._v(e._s(e.$tc("day",e.daysLeftThisMonth)))])]),n("h3",[n("span",{staticClass:"title"},[e._v(e._s(e.$t("pricing.days_in_this_month")))]),n("span",[e._v(e._s(e.$tc("day",e.daysInMonth)))])]),n("el-tooltip",{attrs:{content:e.$t("pricing.provide_by_percentage"),placement:"top"}},[n("h3",[n("span",{staticClass:"title"},[e._v(e._s(e.$t("pricing.percentage_left_month"))),n("i",{staticClass:"el-icon-question"})]),n("span",[e._v(e._s(Math.ceil(100*e.percentageLeftThisMonth))+"%")])])]),n("el-tooltip",{attrs:{content:e.currentMonthFeeCalStr,placement:"top"}},[n("h3",[n("span",{staticClass:"title"},[e._v(e._s(e.$t("pricing.cost_of_month"))),n("i",{staticClass:"el-icon-question"})]),n("span",[e._v("€"+e._s(e.currentMonthFeeDisplay.toFixed(2)))])])]),e.selectedTime>1?n("div",[n("el-tooltip",{attrs:{content:e.otherMonthFeeCalStr,placement:"top"}},[n("h3",[n("span",{staticClass:"title"},[e._v(e._s(e.$t("pricing.cost_of_left_month"))),n("i",{staticClass:"el-icon-question"})]),n("span",[e._v("€"+e._s(e.otherMonthFee.toFixed(2)))])])])],1):e._e(),n("el-divider"),(e.showPromo||e.promoCode)&&!["upgrade","downgrade"].includes(e.purchaseType.type)&&e.selectedTime?n("h3",{staticClass:"promo"},[n("span",{staticClass:"title"},[e._v(e._s(e.$t("promo.title")))]),e.promoCode&&e.promoCodeInfoStr?n("span",{staticClass:"promo-info"},[e._v(e._s(e.promoCodeInfoStr))]):e._e(),n("span",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.promoCode,expression:"promoCode"}],attrs:{type:"text",placeholder:e.$t("promo.hint"),debounce:"300"},domProps:{value:e.promoCode},on:{input:function(t){t.target.composing||(e.promoCode=t.target.value)}}})])]):e._e()],1):e._e()],1):e._e(),n("h3",[n("span",{staticClass:"title"},[e._v(e._s(e.$t("pricing.local_calc_fee")))]),n("span",[e._v(e._s(e.localFeeDisplay))])]),e.vatRate>0?n("h3",[n("span",{staticClass:"title"},[e._v(e._s(e.$t("pricing.vat_rate")))]),n("span",[e._v(e._s(100*e.vatRate)+"%")])]):e._e(),e.balance>0&&e.roundUplocalFee>0?n("div",[n("h3",[n("span",{staticClass:"title"},[e._v(e._s(e.$t("account_balance")))]),n("span",[e._v("€"+e._s(e.balance.toFixed(2)))])])]):e._e()],1):n("div",[n("h3",[n("span",{staticClass:"title"},[e._v(e._s(e.$t("pricing.add_credit")))]),n("span",[e._v("€"+e._s(e.topUpAmount.toFixed(2)))])])]),n("el-divider"),n("h3",{staticClass:"large"},[n("span",{staticClass:"title"},[e._v(e._s(e.$t("billing.due")))]),n("span",[e._v(e._s(e.amountDueDisplay)),e.forcedMinimalFee?n("h5",{staticClass:"subtitle"},[n("small",[e._v(e._s(e.$t("billing.due_rounded")))])]):e._e()])]),e.willPayWithRMB?n("h3",{staticClass:"subtitle secondary"},[n("small",[e._v(e._s(e.$t("pricing.currency_converted_to_cny")))])]):e._e(),e.canPayWithRMB&&"zh"===e.$i18n.locale?n("h3",{staticClass:"subtitle secondary"},[n("small",[e._v(e._s(e.$t("pricing.can_pay_with_yin_lian")))])]):e._e(),e.isYunshanfu?n("h3",{staticClass:"subtitle secondary"},[n("small",[n("b",[e._v(e._s(e.$t("pricing.yunshanfu_usd")))])])]):e._e(),e._t("default")],2)}),[],!1,null,"43d46c16",null);t.default=_.exports}}]);