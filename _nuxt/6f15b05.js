(window.webpackJsonp=window.webpackJsonp||[]).push([[4,19,29,30],{1169:function(a,c,s){var n=s(1214);n.__esModule&&(n=n.default),typeof n=="string"&&(n=[[a.i,n,""]]),n.locals&&(a.exports=n.locals);var _=s(2).default,h=_("ccd943a2",n,!0,{sourceMap:!1})},1170:function(a,c,s){var n=s(1216);n.__esModule&&(n=n.default),typeof n=="string"&&(n=[[a.i,n,""]]),n.locals&&(a.exports=n.locals);var _=s(2).default,h=_("0dc58246",n,!0,{sourceMap:!1})},1171:function(a,c,s){var n=s(1218);n.__esModule&&(n=n.default),typeof n=="string"&&(n=[[a.i,n,""]]),n.locals&&(a.exports=n.locals);var _=s(2).default,h=_("f6804874",n,!0,{sourceMap:!1})},1213:function(a,c,s){"use strict";var n=s(1169),_=s.n(n)},1214:function(a,c,s){var n=s(1),_=n(!1);_.push([a.i,".server-mode-selector-container{position:fixed;bottom:2rem;padding:.5rem;width:100%;background:#34495e}.server-mode-selector-container label{font-weight:500}.server-mode-selector-container .el-form-item__label{color:#f4f7fc}.server-mode-selector-container .el-select input{background:#2c3e50;border:1px solid #f4f7fc;color:#f4f7fc;border-radius:0}.server-mode-selector-container .el-select .el-input .el-input__inner{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}.server-mode-selector-container .el-select .el-input.is-disabled .el-input__inner{background:transparent;color:#f4f7fc}.server-mode-selector-container .el-select .el-input.is-disabled .el-input__suffix{display:none}",""]),a.exports=_},1215:function(a,c,s){"use strict";var n=s(1170),_=s.n(n)},1216:function(a,c,s){var n=s(1),_=n(!1);_.push([a.i,".left-space[data-v-5be800d6]{margin-left:1rem}",""]),a.exports=_},1217:function(a,c,s){"use strict";var n=s(1171),_=s.n(n)},1218:function(a,c,s){var n=s(1),_=n(!1);_.push([a.i,".left-space[data-v-5610ec63]{margin-left:1rem}",""]),a.exports=_},1245:function(a,c,s){"use strict";s.r(c);var n=function(){var i=this,l=i.$createElement,u=i._self._c||l;return u("div",{staticClass:"server-mode-selector-container"},[i.show_smart_route?u("div",[u("el-form",{ref:"form",staticClass:"full-width no-margin",attrs:{"label-width":"60%",size:"small","label-position":"left"}},[u("el-form-item",{staticClass:"no-margin",attrs:{label:i.$t("settings_page.work_mode.title")}},[u("el-select",{staticClass:"full-width no-margin",attrs:{placeholder:"\u9009\u62E9\u4EE3\u7406\u6A21\u5F0F"},model:{value:i.smart_route,callback:function(g){i.smart_route=g},expression:"smart_route"}},[u("el-option",{attrs:{label:i.$tc("settings_page.work_mode.options",1),value:!0}}),u("el-option",{attrs:{label:i.$tc("settings_page.work_mode.options",2),value:!1}})],1)],1)],1)],1):i._e(),i.show_access_mode?u("div",[u("el-form",{ref:"form",staticClass:"full-width no-margin",attrs:{"label-width":"60%",size:"small","label-position":"left"}},[u("el-form-item",{staticClass:"no-margin",attrs:{label:i.server_mode_label}},[u("el-select",{staticClass:"full-width no-margin",attrs:{placeholder:"\u9009\u62E9\u63A5\u5165\u6A21\u5F0F",disabled:i.runTimeState.connect_state.status=="connected"},model:{value:i.servermode,callback:function(g){i.servermode=g},expression:"servermode"}},[u("el-option",{attrs:{label:i.$t("auto"),value:"auto"}}),u("el-option",{attrs:{label:"SSLTide",value:"ssltide",disabled:!i.runTimeState.selected_line.ssltide}}),u("el-option",{attrs:{label:"Trojan",value:"trojan",disabled:!i.runTimeState.selected_line.trojan||!i.coreSupportTrojan}}),u("el-option",{attrs:{label:"V2Ray(VMESS)",value:"v2",disabled:!i.runTimeState.selected_line.v2}})],1)],1)],1)],1):i._e()])},_=[],h=s(28),L={data:function(){return{}},computed:{show_access_mode:function(){return this.runTimeState.show_access_mode},show_smart_route:function(){return this.runTimeState.show_smart_route},server_mode_label:function(){return this.$t("settings_page.connect_protocol.title")},server_mode_str:function(){return{ssltide:"SSLTide",ss:"Shadowsocks(R)",v2:"V2Ray",trojan:"Trojan",auto:"\u81EA\u52A8"}[this.$store.state.runTimeState.server_mode]},coreSupportTrojan:function(){var l=this.versionNewerThan("1.8.3");return l>0},smart_route_str:function(){return""},servermode:{get:function(){return console.log("servermode------>",this.runTimeState.servermode),this.runTimeState.servermode},set:function(l){this.$store.commit("runTimeState",{servermode:l})}},smart_route:{get:function(){return console.log("smart_route------>",this.runTimeState.smart_route),this.runTimeState.smart_route},set:function(l){h.ipcRenderer.send("update-smart-route",l),this.$store.commit("runTimeState",{smart_route:l})}},workmode:{get:function(){return console.log("workmode------>",this.runTimeState.workmode),this.runTimeState.workmode},set:function(l){this.$store.commit("runTimeState",{workmode:l})}}},methods:{}},y=L,O=s(1213),R=s(51),S=Object(R.a)(y,n,_,!1,null,null,null),T=c.default=S.exports},1262:function(a,c,s){var n=s(1336);n.__esModule&&(n=n.default),typeof n=="string"&&(n=[[a.i,n,""]]),n.locals&&(a.exports=n.locals);var _=s(2).default,h=_("1d92baf5",n,!0,{sourceMap:!1})},1299:function(a,c,s){"use strict";s.r(c);var n=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"server-list-container"},[t("div",{staticClass:"kept-space"}),t("div",{staticClass:"server-list",style:e.listStyle},[e._l(e.sortedLinesWithAuto,function(o,v){return t("el-card",{key:o.name,staticClass:"line-container",class:{selected:e.runTimeState.selected_line.name==o.name,connected:e.runTimeState.connect_state.status=="connected"&&e.runTimeState.connect_state.line.name==o.name},attrs:{"body-style":e.card_style},nativeOn:{click:function(f){return e.changeSelectedLine(o)}}},[t("el-row",{staticClass:"line-content"},[t("h1",{staticClass:"title smooth"},[!e.runTimeState.no_flag&&!o.is_auto?t("flag",{attrs:{iso:e.getFlagISO(o),squared:!1}}):e._e(),t("ServerName",{staticClass:"server-name",attrs:{server:o}},[e.faved(o)?t("i",{staticClass:"el-icon-star-on fav",attrs:{slot:"hover"},on:{click:function(f){return e.delFav(o)}},slot:"hover"}):t("i",{staticClass:"el-icon-star-off fav",attrs:{slot:"hover"},on:{click:function(f){return e.addFav(o)}},slot:"hover"})]),o.ratio>1?t("a",{staticClass:"label"},[t("el-popover",{attrs:{placement:"top-start",width:"200",trigger:"hover",content:"\u5C06\u4EE5\u5B9E\u9645\u4F7F\u7528\u91CF x"+o.ratio+" \u8BA1\u5165\u8D26\u53F7"}},[t("span",{attrs:{slot:"reference"},slot:"reference"},[e._v("x"+e._s(o.ratio))])])],1):e._e(),t("span",{directives:[{name:"show",rawName:"v-show",value:e.runTimeState.connect_state.status=="connected"&&e.runTimeState.connect_state.line.name==o.name,expression:"runTimeState.connect_state.status == 'connected' && runTimeState.connect_state.line.name == line.name"}],staticClass:"right"},[t("i",{staticClass:"right el-icon-success"})]),e.getLatencyResult(o)?t("span",{staticClass:"right label round success super-badge test-result"},[e.getLatencyResult(o)<5001?t("span",[e._v(e._s(e.getLatencyResult(o))),t("span",{staticClass:"small"},[e._v("ms")])]):e._e(),e.getLatencyResult(o)>5e3?t("span",[t("span",{staticClass:"small"},[e._v(e._s(e.$t("timeout")))])]):e._e()]):e._e(),o.perm&&e.runTimeState.current_service_cate=="allplatform"&&o.perm.indexOf(2)==-1?t("span",{staticClass:"right label round super-badge"},[e._v(e._s(e.$t("pro_only")))]):e._e(),o.premium?t("span",{staticClass:"right label round super-badge premium-badge"},[t("el-popover",{attrs:{placement:"top-start",width:"200",trigger:"hover",content:e.$tc("buy_premium_data.premium_cost_hint",e.pre_left_str)},nativeOn:{click:function(f){return e.goBuyPremiumData.apply(null,arguments)}}},[t("span",{attrs:{slot:"reference"},slot:"reference"},[e.pre_left_str=="\u221E"?t("span",[e._v(e._s(e.pre_left_str)+e._s(e.$t("premium")))]):e._e(),e.pre_left>0?t("span",[e._v(e._s(e.$t("premium"))+" "+e._s(e.pre_left_str))]):e._e(),e.pre_left<=0?t("span",[e._v(e._s(e.$t("buy_premium_data.badge_hint")))]):e._e()])])],1):e._e()],1),t("h5",{staticClass:"description"},[t("ServerDescription",{attrs:{server:o}})],1)])],1)}),t("el-card",{staticClass:"utils"},[t("el-button",{attrs:{type:"primary"},on:{click:e.performLatencyTest}},[e._v(e._s(e.$t("speed_test.btn")))]),t("br"),t("br"),t("p",{staticClass:"small"},[e._v(e._s(e.$t("speed_test.desc")))])],1)],2),t("div",[t("ModeSelection")],1)])},_=[],h=s(63),L=s(40),y=s(22),O=s(39),R=s(49),S=s(26),T=s(48),i=s(47),l=s(23),u=s(24),g=s(9),W=s(41),E=s(18),U=s(76),C=s(6),K=s(144),J=s(65),X=s(27),G=s(207),x=s(212),m=s(28),D=s(53),M=s(1245);function P(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(v){return Object.getOwnPropertyDescriptor(e,v).enumerable})),t.push.apply(t,o)}return t}function A(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?P(Object(t),!0).forEach(function(o){Object(E.a)(e,o,t[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):P(Object(t)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))})}return e}function I(e,r){var t=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=N(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var o=0,v=function(){};return{s:v,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(j){throw j},f:v}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var f=!0,b=!1,d;return{s:function(){t=t.call(e)},n:function(){var j=t.next();return f=j.done,j},e:function(j){b=!0,d=j},f:function(){try{!f&&t.return!=null&&t.return()}finally{if(b)throw d}}}}function N(e,r){if(!!e){if(typeof e=="string")return w(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return w(e,r)}}function w(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}var F=D.require("nodejs-tcp-ping"),z={components:{ModeSelection:M.default},data:function(){return{card_style:{"padding-top":0},selected_line:{},actualServerUsedByClash:null}},computed:{sortedLines:function(){var r=Object(x.a)(this.current_lines).sort(this.lineSorter);return r},sortedLinesWithAuto:function(){return this.coreIsClash?[this.auto_server].concat(Object(x.a)(this.sortedLines)):this.sortedLines},show_access_mode:function(){return this.runTimeState.show_access_mode},show_smart_route:function(){return this.runTimeState.show_smart_route},listStyle:function(){var r=3.2;return console.log(this.show_access_mode),console.log(this.show_smart_route),this.show_access_mode&&(r+=2.8),this.show_smart_route&&(r+=2.8),console.log(r),{bottom:r+"rem"}},pre_left:function(){return this.current_service.pre_quota>=1e3?"\u221E":(Number(this.current_service.pre_quota)-Number(this.current_service.pre_used)).toFixed(1)},pre_left_str:function(){return isNaN(Number(this.pre_left))?this.pre_left:"".concat(this.pre_left,"GB")},pre_used_str:function(){return this.current_service.pre_used.toFixed(1)+"GB"},auto_server:function(){return{is_auto:!0,name:this.$t("auto_server.name"),description:this.$t("auto_server.description")}},workmode:{get:function(){return console.log("workmode------>",this.runTimeState.workmode),this.runTimeState.workmode},set:function(r){this.$store.commit("runTimeState",{workmode:r})}}},created:function(){var r=this;m.ipcRenderer.removeAllListeners("run-time-state-change"),m.ipcRenderer.removeAllListeners("selected_line-change"),m.ipcRenderer.on("selected_line-change",function(t,o){r.changeSelectedLine(o)}),m.ipcRenderer.removeAllListeners("tcp-ping-reply"),m.ipcRenderer.on("tcp-ping-reply",function(t,o){r.speedTestReply(o)}),this.coreIsClash&&(m.ipcRenderer.removeAllListeners("clash-speed-test-reply"),m.ipcRenderer.on("clash-speed-test-reply",function(t,o){r.clashSpeedTestReply(o)}),m.ipcRenderer.removeAllListeners("clash-auto-server-change"),m.ipcRenderer.on("clash-auto-server-change",function(t,o){console.log("clash auto server changed:",o),r.$notify({title:r.$t("new_server_selected")+o,type:"success",offset:20,duration:2500})}))},mounted:function(){var r=this;(!this.runTimeState.selected_line||!this.runTimeState.selected_line.name)&&(console.log("set default line.",this.sortedLines[0]),this.sortedLines[0]&&(this.changeSelectedLine(this.sortedLines[0]),this.sortedLines[0]||setTimeout(function(){r.changeSelectedLine(r.sortedLines[0])},1e3)))},methods:{getFlagISO:function(r){if(!r.name)return"";var t=r.name.split(" ")[0].replace(/\d/g,"").toLowerCase(),o={la:"us",ft:"us",sjc:"us"};return o[t]||t},addFav:function(r){this.faved(r)||(this.fav_lines=[r.pac_name].concat(Object(x.a)(this.fav_lines)))},delFav:function(r){var t=Object(x.a)(this.fav_lines);this.faved(r)&&(t.splice(this.fav_lines.indexOf(r.pac_name),1),this.fav_lines=t)},updateSortServiceLines:function(){var r=Object(x.a)(this.current_lines).sort(this.lineSorter);this.$store.dispatch("updateServerList",{cate:this.current_service_cate,serverList:r})},changeSelectedLine:function(r){var t=this;if(!!r){if(console.log("ssl port:",r.ssltide_port),this.connected&&!this.coreIsClash)return console.log("Connected and not using Clash, ignoring.");if(r.premium&&this.pre_left<=0)return this.$confirm(this.$t("buy_premium_data.line_change_warning")).then(function(v){t.$router.push({path:"/dashboard/buy-premium-data/"})}).catch(function(v){});if(this.$store.dispatch("runTimeState",{selected_line:r}),this.workmode=r.is_auto?"auto":"manual",this.connected&&this.coreIsClash)if(this.runTimeState.connect_state.line.name===r.name)console.log("same server, click ignored.");else{r.is_auto?m.ipcRenderer.send("clash",{action:"switchToAutoServer"}):m.ipcRenderer.send("clash",{action:"setProxy",arg:r.name});var o={line:JSON.parse(JSON.stringify(r)),servermode:this.runTimeState.servermode,status:"connected"};this.$store.dispatch("runTimeState",{connect_state:o}),m.ipcRenderer.send("user-info-update",4)}!r.is_auto&&this.runTimeState.servermode!=="auto"&&!r[this.runTimeState.servermode]&&(console.log("changing servermode..."),this.$store.dispatch("runTimeState",{servermode:"auto"}))}},performLatencyTest:function(){return this.coreIsClash?this.connected?this.clashSpeedTest():this.tcpSpeedTest():this.tcpSpeedTest()},tcpSpeedTest:function(){this.$message(this.$t("speed_test.notify"));var r=I(this.sortedLines),t;try{for(r.s();!(t=r.n()).done;){var o=t.value;this.tcpPingOneServer(o)}}catch(v){r.e(v)}finally{r.f()}},tcpPingOneServer:function(r){var t=this;return Object(C.a)(regeneratorRuntime.mark(function o(){var v,f,b;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return v=443,t.runTimeState.current_service_cate==="home"&&(v=8443),f=r.ssltide_port||v,p.next=5,t.tcpPing({name:r.name,server:r.server,port:f,opt:{}});case 5:b=p.sent,t.speedTestReply(b);case 7:case"end":return p.stop()}},o)}))()},tcpPing:function(r){return Object(C.a)(regeneratorRuntime.mark(function t(){var o,v,f;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,d.t0=A,d.next=4,F.tcpPing({attempts:(r==null||(o=r.opt)===null||o===void 0?void 0:o.attempts)||3,host:r.server,port:r.port,timeout:(r==null||(v=r.opt)===null||v===void 0?void 0:v.timeout)||5e3});case 4:return d.t1=d.sent,d.t2={result:d.t1},d.t3=r,f=(0,d.t0)(d.t2,d.t3),d.abrupt("return",f);case 11:d.prev=11,d.t4=d.catch(0),console.log(d.t4);case 14:case"end":return d.stop()}},t,null,[[0,11]])}))()},clashSpeedTest:function(){var r=this;this.$message(this.$t("speed_test.notify")),this.sortedLines.forEach(function(t){m.ipcRenderer.send("clash-speed-test",{arg:{serverName:t.name,url:r.runTimeState.checkwebsite||"http://www.gstatic.com/generate_204",timeout:5e3}})})},speedTestReply:function(r){console.log(r),this.$store.dispatch("speedTestResult",r)},clashSpeedTestReply:function(r){this.$store.dispatch("clashSpeedTestResult",r)},goBuyPremiumData:function(){var r=this;console.log("yay");var t="/buy-service/?cate=allplatform&time=0";if(this.pre_left<=0)return this.$router.push({path:t});this.$confirm(this.$t("buy_premium_data.redirect_confirm")).then(function(o){r.$router.push({path:t})}).catch(function(o){})}}},B=z,V=s(1335),k=s(51),$=Object(k.a)(B,n,_,!1,null,null,null),H=c.default=$.exports;installComponents($,{ServerName:s(1300).default,ServerDescription:s(1301).default,ModeSelection:s(1245).default})},1300:function(a,c,s){"use strict";s.r(c);var n=function(){var l=this,u=l.$createElement,g=l._self._c||u;return g("span",[l._v(l._s(l.name)),l._t("hover")],2)},_=[],h=s(144),L=s(27),y={name:"ServerName",props:{server:{type:Object,default:function(){}}},computed:{name:function(){return this.$i18n.locale==="zh"?this.server.name:this.server.name.split(" ")[0]}}},O=y,R=s(1215),S=s(51),T=Object(S.a)(O,n,_,!1,null,"5be800d6",null),i=c.default=T.exports},1301:function(a,c,s){"use strict";s.r(c);var n=function(){var l=this,u=l.$createElement,g=l._self._c||u;return g("span",[l._v(l._s(l.description))])},_=[],h=s(27),L=s(109),y={name:"ServerDescription",props:{server:{type:Object,default:function(){}}},computed:{description:function(){return this.$i18n.locale==="zh"||this.server.name.startsWith("AUTO")?this.server.description:this.server.name.startsWith("CN")?"Specially optimized for access from China.":""}}},O=y,R=s(1217),S=s(51),T=Object(S.a)(O,n,_,!1,null,"5610ec63",null),i=c.default=T.exports},1335:function(a,c,s){"use strict";var n=s(1262),_=s.n(n)},1336:function(a,c,s){var n=s(1),_=n(!1);_.push([a.i,".server-list-container{position:fixed;bottom:6.2rem;height:100vh}.server-list-container .utils{background:#2c3e50;text-align:center;border:none;border-radius:0}.server-list-container .utils *{color:#f9f9f9}.server-list-container .utils a{color:#1abc9c!important}.server-list-container .utils .el-button{background:transparent}.server-list-container .kept-space{position:fixed;top:0;left:0;height:1.5rem}.server-list-container .server-list{top:1.5rem;overflow-x:overlay;overflow-y:overlay;position:fixed}.server-list-container .server-list .el-card:hover{box-shadow:0 2px 12px 0 rgba(0,0,0,.2)}.server-list-container .server-list:hover::-webkit-scrollbar{width:2px;background-color:#2c3e50}.server-list-container .server-list::-webkit-scrollbar{width:0}.server-list-container .server-list::-webkit-scrollbar-track,.server-list-container .server-list::-webkit-scrollbar-track-piece{display:none}.server-list-container .server-list::-webkit-scrollbar-thumb{background:grey}.server-list-container .server-list .line-container{cursor:default;margin-bottom:1px;position:relative;border:none;border-radius:0!important;width:100vw;background:#2c3e50}.server-list-container .server-list .line-container .line-content{border:none;width:100%;padding-top:1rem}.server-list-container .server-list .line-container .line-content .server-name .fav{display:none;color:#f4f7fc;margin-left:1rem}.server-list-container .server-list .line-container .line-content:hover .server-name .fav{display:inline-block}.server-list-container .server-list .line-container .line-content .super-badge{margin:0 .1rem 0 .5rem;color:#f9f9f9!important;background:#8e44ad}.server-list-container .server-list .line-container .line-content .super-badge.premium-badge{cursor:pointer}.server-list-container .server-list .line-container .line-content .super-badge.premium-badge .test-result{margin:0 1rem;background:#7f8c8d!important}.server-list-container .server-list .line-container .line-content .line-number{display:none;font-size:1rem;color:#95a5a6}.server-list-container .server-list .line-container .line-content .label{margin-left:1rem;font-size:.8rem}.server-list-container .server-list .line-container .line-content .title{font-size:1.3rem;font-weight:500;color:#bdc3c7}.server-list-container .server-list .line-container .line-content .title .flag-icon{margin-right:1rem}.server-list-container .server-list .line-container .line-content .description{margin-top:.5rem;font-weight:500;font-size:.8rem;color:#95a5a6}.server-list-container .server-list .line-container.connected{background:#16a085}.server-list-container .server-list .line-container.connected *{color:#fff!important}.server-list-container .server-list .line-container.selected{position:-webkit-sticky;position:sticky;top:0;bottom:0;z-index:999999;box-shadow:0 0 12px 5px rgba(0,0,0,.3)}.server-list-container .server-list .line-container.selected:not(.connected){background:#16a085}.server-list-container .server-list .line-container.selected:not(.connected) *{color:#fff}.server-list-container .server-list .line-container:hover .line-number{display:inline}.server-list-container .server-list .line-container:hover .line-number .title{padding-left:.5rem}.server-list-container .server-list .line-container:hover:not(.connected):not(.selected){background:#34495e}.server-list-container .server-list .line-container:hover:not(.connected):not(.selected) *{color:#bdc3c7}",""]),a.exports=_}}]);
