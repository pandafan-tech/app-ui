(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{1288:function(c,i,o){var _=o(1444);_.__esModule&&(_=_.default),typeof _=="string"&&(_=[[c.i,_,""]]),_.locals&&(c.exports=_.locals);var l=o(2).default,p=l("f5215aac",_,!0,{sourceMap:!1})},1443:function(c,i,o){"use strict";var _=o(1288),l=o.n(_)},1444:function(c,i,o){var _=o(1),l=_(!1);l.push([c.i,".update-container{height:100vh;padding:2rem .5rem .5rem;position:relative;color:#f4f7fc}.update-container h2{font-weight:500}.update-container .top-space{margin-top:1rem}.update-container .info-content,.update-container .info-header{color:#34495e;margin-bottom:.5rem;line-height:1.2}.update-container .info-header{color:#7f8c8d}.update-container .info-header h3{font-weight:400}.update-container .large-button{font-size:1.5rem}.update-container .dashboard-link{position:absolute;right:.5rem;bottom:.5rem}.update-container .menu-link{font-size:2rem;text-decoration:none;width:100%;display:block;margin-top:.5rem;padding-left:.5rem}.update-container .menu-link:hover{background:#1abc9c;color:#fff}",""]),c.exports=l},1485:function(c,i,o){"use strict";o.r(i);var _=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"update-container"},[t("center",[t("h1",[e._v(e._s(e.$t("check_for_update.page_title")))])]),t("br"),t("el-row",[t("el-col",{attrs:{span:12}},[t("h2",[e._v(e._s(e.$t("check_for_update.current_sys_info")))])]),t("el-col",{attrs:{span:12}},[t("h2",[e._v(e._s(e.sysInfo.platform)+" "+e._s(e.sysInfo.arch))])])],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("h2",[e._v(e._s(e.$t("check_for_update.current_core")))])]),t("el-col",{attrs:{span:12}},[t("h2",[e._v(e._s(e.appVersion))])])],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("h2",{staticClass:"thin"},[e._v(e._s(e.$t("check_for_update.latest_core")))])]),t("el-col",{attrs:{span:12}},[t("h2",{staticClass:"succes",on:{click:function(a){e.openSite(e.dlLink(e.latestVersion.stable))}}},[t("a",{staticClass:"success"},[e._v(e._s(e.latestVersion.stable)+" "+e._s(e.$t("check_for_update.download.stable")))])]),e.latestVersion.beta!=="-"?t("h2",{staticClass:"warning",on:{click:function(a){e.openSite(e.dlLink(e.latestVersion.beta))}}},[t("a",{staticClass:"warning"},[e._v(e._s(e.latestVersion.beta)+" "+e._s(e.$t("check_for_update.download.beta")))])]):e._e()])],1),t("div",[t("br"),t("hr"),t("br"),t("center",[t("h2",[e._v(e._s(e.$t("check_for_update.manual_only"))),t("br"),t("small",[e._v(e._s(e.$t("check_for_update.auto_after_update")))])]),t("br")]),e.sysInfo.platform=="darwin"?t("el-row",[t("p",[t("a",{on:{click:function(a){e.openSite(e.dlLink(e.latestVersion[e.showBranch||"stable"]))}}},[e._v(e._s(e.$t("check_for_update.click_to_download")))])]),t("p",[e._v(e._s(e.$t("check_for_update.mac.a"))),t("a",{on:{click:function(a){return e.openDir("/Applications/")}}},[e._v(e._s(e.$t("check_for_update.mac.b")))]),e._v(e._s(e.$t("check_for_update.mac.c")))])]):e._e(),e.sysInfo.platform=="win32"?t("el-row",[t("p",[t("a",{on:{click:function(a){e.openSite(e.dlLink(e.latestVersion[e.showBranch||"stable"]))}}},[e._v(e._s(e.$t("check_for_update.click_to_download")))])]),t("p",[e._v(e._s(e.$t("check_for_update.win.a")))]),t("p",[e._v(e._s(e.$t("check_for_update.win.b")))]),t("br"),t("h4",[e._v(e._s(e.$t("check_for_update.win.c")))]),t("p",[e._v(e._s(e.$t("check_for_update.win.d")))]),t("br"),t("p",[e._v(e._s(e.$t("check_for_update.win.e")))]),t("br"),t("p",[e._v(e._s(e.$t("check_for_update.win.f")))]),t("a",{on:{click:function(a){return e.openDir(e.appPath)}}},[e._v(e._s(e.appPath))])]):e._e()],1),t("a",{staticClass:"dashboard-link",on:{click:function(a){return e.$router.go(-1)}}},[e._v(" "+e._s(e.$t("back")))])],1)},l=[],p=o(206),b=o(9),r=o(46),d=o(53),u=o(1153),f=o.n(u),h={components:{VueMarkdown:f.a},data:function(){var n=d.app.getAppPath(),t=d.app.getVersion();return{appPath:n,updating:!1,appVersion:t,restart_prompt:!1,updateFailed:!1,dlProgress:{progress:0},showBranch:null,sysInfo:d.process,latestVersion:{stable:"",beta:"-"}}},computed:{},created:function(){var n=this,t=this;this.$nextTick(function(){n.$nuxt.$loading.start(),n.$axios.get("funstuff/client_version").then(function(a){t.latestVersion=a.data}).catch(function(a){t.$alert("\u8BF7\u8FD4\u56DE\u7A0D\u540E\u91CD\u8BD5","\u83B7\u53D6\u7248\u672C\u4FE1\u606F\u5931\u8D25",{center:!0}).catch(function(s){})}).finally(function(){t.$nuxt.$loading.finish()})})},beforeDestroy:function(){r.ipcRenderer.removeAllListeners("download-progress"),r.ipcRenderer.removeAllListeners("update-info")},methods:{update:function(n){var t=this;this.updating=!0,r.ipcRenderer.removeAllListeners("download-progress"),r.ipcRenderer.on("download-progress",function(a,s){console.log("progress:",s),s.progress=Number(s.progress.toFixed(1)),t.dlProgress=s}),r.ipcRenderer.on("update-completed",function(a,s){t.updating=!1,console.log(s),s?(t.$message({message:"\u66F4\u65B0\u5931\u8D25\uFF0C\u8BF7\u5C1D\u8BD5\u624B\u52A8\u66F4\u65B0: "+s.message,type:"warning"}),t.updateFailed=!0):t.restart_prompt=!0}),r.ipcRenderer.send("do-update",{version_info:n})},restart:function(){r.ipcRenderer.send("restart")},dlLink:function(n){var t;return this.sysInfo.platform==="win32"&&(t="win/PandaFan-".concat(this.sysInfo.platform,"-").concat(this.sysInfo.arch,"-").concat(n,".zip")),this.sysInfo.platform==="darwin"&&(t="mac/PandaFan-".concat(n,".dmg")),"https://xconf.oss-accelerate.aliyuncs.com/panda/dl/client/".concat(t)},openDir:function(n){r.shell.showItemInFolder(n)},byteHelper:function(n){var t=["b","kB","MB","GB","TB"],a=Math.floor(Math.log(n)/Math.log(1024));return(n/Math.pow(1024,Math.floor(a))).toFixed(1)+" "+t[a]}}},v=h,k=o(1443),m=o(51),g=Object(m.a)(v,_,l,!1,null,null,null),y=i.default=g.exports}}]);
